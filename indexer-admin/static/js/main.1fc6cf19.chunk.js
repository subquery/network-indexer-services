(this["webpackJsonp@subql/indexer-admin"]=this["webpackJsonp@subql/indexer-admin"]||[]).push([[0],{104:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return x}));var r=n(29),a=n(627),i=n(1),c=n.n(i),o=n(196),s=n(414),u=Object(s.create)({url:window.env.IPFS_GATEWAY}),l=Object(s.create)({url:"https://ipfs.subquery.network/ipfs/api/v0"});function d(t){return"0x".concat(e.from(o.utils.base58.decode(t)).slice(2).toString("hex"))}function p(t){var n="1220".concat(t.slice(2)),r=e.from(n,"hex");return o.utils.base58.encode(r)}function b(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n}function j(e,t){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.add(JSON.stringify({name:t,url:n}),{pin:!0});case 2:return r=e.sent,a=r.cid.toV0().toString(),e.abrupt("return",d(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return h.apply(this,arguments)}function h(){return h=Object(r.a)(c.a.mark((function t(n){var r,i,o,s,l,d,p,j,f,x,h=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:u,i=r.cat(n),s=!1,l=!1,t.prev=4,p=Object(a.a)(i);case 6:return t.next=8,p.next();case 8:if(!(s=!(j=t.sent).done)){t.next=14;break}f=j.value,o=o?b(o,f):f;case 11:s=!1,t.next=6;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(4),l=!0,d=t.t0;case 20:if(t.prev=20,t.prev=21,!s||null==p.return){t.next=25;break}return t.next=25,p.return();case 25:if(t.prev=25,!l){t.next=28;break}throw d;case 28:return t.finish(25);case 29:return t.finish(20);case 30:if(o){t.next=33;break}return console.error("Unable to fetch data from ipfs: ".concat(n)),t.abrupt("return",o);case 33:return x=e.from(o).toString("utf8"),t.prev=34,t.abrupt("return",JSON.parse(e.from(o).toString("utf8")));case 38:return t.prev=38,t.t1=t.catch(34),t.abrupt("return",x);case 41:case"end":return t.stop()}}),t,null,[[4,16,20,30],[21,,25,29],[34,38]])}))),h.apply(this,arguments)}}).call(this,n(81).Buffer)},1138:function(e,t){},1202:function(e,t){},1203:function(e,t){},1232:function(e,t,n){},1233:function(e,t,n){},1234:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(62),c=n.n(i),o=n(1287),s=n(1291),u=n(237),l=n(85),d=n(1286),p=n(1297),b=n(94),j=n(19),f=n(100),x=n(23),h=n(14),O=n(6),m=n(7),v=function(){function e(t){Object(O.a)(this,e),this.prefix=void 0,this.prefix=null!==t&&void 0!==t?t:""}return Object(m.a)(e,[{key:"getLogger",value:function(t){return new e("".concat(this.prefix,"[").concat(t,"]"))}},{key:"l",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).log.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}},{key:"w",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).warn.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}},{key:"e",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).error.apply(t,["".concat(this.prefix).concat(null===e||void 0===e?void 0:e.toString())].concat(r))}}]),e}(),g=v,y=n(2),w=Symbol(void 0),k=new g;function S(e,t){var n=Object(r.createContext)(w);return null!==t&&void 0!==t&&t.displayName&&(n.displayName=t.displayName),{Provider:function(a){var i=a.initialState,c=a.children,o=Object(r.useMemo)((function(){return null!==t&&void 0!==t&&t.displayName?k.getLogger(null===t||void 0===t?void 0:t.displayName):k}),[]),s=e(o,i);return Object(y.jsx)(n.Provider,{value:s,children:c})},useContainer:function(){var e,t=Object(r.useContext)(n);if(t===w)throw new Error("Component must be wrapped with <".concat(null!==(e=n.displayName)&&void 0!==e?e:"Container",".Provider>"));return t}}}var E,C,I,T,P,N,q,A,R,M,D,z,L,V,U,G,F,$,_,Y,H,K,W,B=S((function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2);return{pageLoading:t[0],setPageLoading:t[1]}}),{displayName:"Global Loading"}),X=B.useContainer,Q=B.Provider,J=x.a.div(E||(E=Object(j.a)(["\n  position: absolute;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  background-color: #f6f9fc;\n  justify-content: center;\n  align-items: flex-start;\n"]))),Z=function(){return X().pageLoading?Object(y.jsx)(J,{children:Object(y.jsx)(f.b,{size:30})}):null},ee=n(10),te=n(240),ne=n(378),re=n(379),ae=n(380),ie=n(229),ce=n(405),oe=n(46),se=n(29),ue=n(1),le=n.n(ue),de=n(1299),pe=n(1277),be=n(123),je=Object(be.gql)(C||(C=Object(j.a)(["\n  query {\n    accountMetadata {\n      indexer\n    }\n  }\n"]))),fe=Object(be.gql)(I||(I=Object(j.a)(["\n  mutation AddIndexer($indexer: String!) {\n    addIndexer(indexer: $indexer) {\n      indexer\n    }\n  }\n"]))),xe=Object(be.gql)(T||(T=Object(j.a)(["\n  mutation StartProject(\n    $forceEnabled: Boolean!\n    $queryVersion: String!\n    $nodeVersion: String!\n    $networkDictionary: String!\n    $networkEndpoint: String!\n    $id: String!\n  ) {\n    startProject(\n      forceEnabled: $forceEnabled\n      queryVersion: $queryVersion\n      nodeVersion: $nodeVersion\n      networkDictionary: $networkDictionary\n      networkEndpoint: $networkEndpoint\n      id: $id\n    ) {\n      id\n      status\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),he=Object(be.gql)(P||(P=Object(j.a)(["\n  mutation StopProject($id: String!) {\n    stopProject(id: $id) {\n      id\n      status\n      networkEndpoint\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),Oe=Object(be.gql)(N||(N=Object(j.a)(["\n  query {\n    controllers {\n      id\n      address\n    }\n  }\n"]))),me=Object(be.gql)(q||(q=Object(j.a)(["\n  mutation AddController {\n    addController\n  }\n"]))),ve=Object(be.gql)(A||(A=Object(j.a)(["\n  mutation RemoveController($id: String!) {\n    removeAccount(id: $id) {\n      id\n    }\n  }\n"]))),ge=Object(be.gql)(R||(R=Object(j.a)(["\n  query WithdrawController($id: String!) {\n    withrawController(id: $id)\n  }\n"]))),ye=Object(be.gql)(M||(M=Object(j.a)(["\n  mutation {\n    removeAccounts\n  }\n"]))),we=Object(be.gql)(D||(D=Object(j.a)(["\n  mutation AddProject($id: String!) {\n    addProject(id: $id) {\n      id\n      status\n    }\n  }\n"]))),ke=Object(be.gql)(z||(z=Object(j.a)(["\n  mutation RemoveProject($id: String!) {\n    removeProject(id: $id) {\n      status\n    }\n  }\n"]))),Se=(Object(be.gql)(L||(L=Object(j.a)(["\n  mutation ChannelClose($id: String!) {\n    channelClose(id: $id) {\n      id\n      spent\n      remote\n      onchain\n      lastFinal\n    }\n  }\n"]))),Object(be.gql)(V||(V=Object(j.a)(["\n  mutation UpdateServices($queryEndpoint: String!, $nodeEndpoint: String!, $id: String!) {\n    updateProjectServices(queryEndpoint: $queryEndpoint, nodeEndpoint: $nodeEndpoint, id: $id) {\n      status\n      nodeEndpoint\n      queryEndpoint\n    }\n  }\n"]))),Object(be.gql)(U||(U=Object(j.a)(["\n  query Project($id: String!) {\n    project(id: $id) {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      forceEnabled\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"])))),Ee=Object(be.gql)(G||(G=Object(j.a)(["\n  query {\n    getProjects {\n      id\n      status\n      nodeEndpoint\n      queryEndpoint\n      networkEndpoint\n      networkDictionary\n      nodeVersion\n      queryVersion\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"]))),Ce=Object(be.gql)(F||(F=Object(j.a)(["\n  query GetLog($container: String!) {\n    getLog(container: $container) {\n      log\n    }\n  }\n"]))),Ie=Object(be.gql)($||($=Object(j.a)(["\n  query QueryMetadata($id: String!) {\n    queryMetadata(id: $id) {\n      lastProcessedHeight\n      lastProcessedTimestamp\n      targetHeight\n      chain\n      indexerHealthy\n      indexerNodeVersion\n      queryNodeVersion\n      indexerStatus\n      queryStatus\n    }\n  }\n"]))),Te=Object(be.gql)(_||(_=Object(j.a)(["\n  query GetIndexerProjects($indexer: String!) {\n    deploymentIndexers(filter: { indexerId: { equalTo: $indexer } }) {\n      nodes {\n        indexerId\n        deploymentId\n        status\n      }\n    }\n  }\n"]))),Pe=Object(be.gql)(Y||(Y=Object(j.a)(["\n  query GetProjectDetails($deploymentId: String!) {\n    deployments(filter: { id: { equalTo: $deploymentId } }) {\n      nodes {\n        id\n        projectId\n        project {\n          owner\n          currentVersion\n          currentDeployment\n          createdTimestamp\n          updatedTimestamp\n          metadata\n        }\n      }\n    }\n  }\n"]))),Ne=Object(be.gql)(H||(H=Object(j.a)(["\n  query GetRegistryVersions($range: String!, $registry: String!) {\n    getRegistryVersions(range: $range, registry: $registry)\n  }\n"]))),qe=Object(be.gql)(K||(K=Object(j.a)(["\n  mutation PaygProject(\n    $paygPrice: String!\n    $paygExpiration: Float!\n    $paygThreshold: Float!\n    $paygOverflow: Float!\n    $id: String!\n  ) {\n    paygProject(\n      paygPrice: $paygPrice\n      paygExpiration: $paygExpiration\n      paygThreshold: $paygThreshold\n      paygOverflow: $paygOverflow\n      id: $id\n    ) {\n      id\n      paygPrice\n      paygExpiration\n      paygThreshold\n      paygOverflow\n    }\n  }\n"])));Object(be.gql)(W||(W=Object(j.a)(["\n  mutation ChannelCheckpoint($id: String!) {\n    channelCheckpoint(id: $id) {\n      id\n      spent\n      remote\n      onchain\n    }\n  }\n"])));var Ae=S((function(){var e=Object(de.a)(je),t=Object(h.a)(e,2),n=t[0],a=t[1],i=a.data,c=a.loading,o=a.error,s=Object(pe.a)(fe),u=Object(h.a)(s,1)[0],l=r.useState(),d=Object(h.a)(l,2),p=d[0],b=d[1];r.useEffect((function(){var e;b(null===i||void 0===i||null===(e=i.accountMetadata)||void 0===e?void 0:e.indexer)}),[i]);var j=r.useCallback(function(){var e=Object(se.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{indexer:t}});case 2:b(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]);return{indexer:p,updateIndexer:j,load:n,loading:c,error:o}}),{displayName:"Coordinator Indexer"}),Re=Ae.useContainer,Me=Ae.Provider;function De(){return Object(r.useMemo)((function(){var e;return null===(e=window.ethereum)||void 0===e?void 0:e.isMetaMask}),[window.ethereum])}var ze,Le,Ve=function(){return Object(ce.b)()};function Ue(){var e=Ve(),t=e.active,n=e.account,a=e.library;return Object(r.useMemo)((function(){return null===a||void 0===a?void 0:a.getSigner()}),[t,n])}function Ge(){var e=Ve(),t=e.active,n=e.library;return Object(r.useMemo)((function(){var e;return null===n||void 0===n||null===(e=n.provider)||void 0===e?void 0:e.isMetaMask}),[t,null===n||void 0===n?void 0:n.provider.isMetaMask])}!function(e){e.testnet="0x13881",e.kepler="0x89",e.mainnet="0x89"}(Le||(Le={}));var Fe,$e=[Le.testnet,Le.kepler,Le.mainnet],_e={testnet:Le.testnet,kepler:Le.kepler,mainnet:Le.mainnet},Ye=(ze={},Object(ee.a)(ze,Le.testnet,te.networks.testnet),Object(ee.a)(ze,Le.kepler,te.networks.kepler),Object(ee.a)(ze,Le.mainnet,te.networks.mainnet),ze);var He={testnet:ae,kepler:ne,mainnet:re};function Ke(e){return{deploymentDetails:He[e],network:e}}var We=(Fe={},Object(ee.a)(Fe,Le.testnet,Ke("testnet")),Object(ee.a)(Fe,Le.kepler,Ke("kepler")),Object(ee.a)(Fe,Le.mainnet,Ke("mainnet")),Fe);var Be=S((function(e){var t=a.a.useState(),n=Object(h.a)(t,2),r=n[0],i=n[1],c=Ve(),o=c.library,s=c.chainId,u=Ge();return a.a.useEffect((function(){if(s&&(t=Object(ie.intToHex)(s),$e.includes(t))){var t,n=We[Object(ie.intToHex)(s)];if(!n||!n.network||!n.deploymentDetails)throw new Error("Invalid sdk options, contracts provider requires network and deploymentDetails");o&&u&&te.ContractSDK.create(o,n).then((function(e){return i(e)})).catch((function(t){e.e("Failed to create ContractSDK instance",t),i(void 0)}))}}),[e,o,s,u]),r}),{displayName:"Contract SDK"}),Xe=Be.useContainer,Qe=Be.Provider,Je=n(11);var Ze=S((function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1],i=function(){return a({visible:!1,steps:void 0})};return{modalData:n,showModal:function(e){return a(Object(Je.a)(Object(Je.a)({},e),{},{onClose:i}))},removeModal:i}}),{displayName:"Global Modal"}),et=Ze.useContainer,tt=Ze.Provider,nt=n(429);n(914);var rt,at,it=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(nt.ReactNotifications,{})})},ct=S((function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1];return{notification:n,dispatchNotification:function(e){return a(e),nt.Store.addNotification({title:e.title,message:e.message,type:e.type,container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:e.dismiss})},removeNotification:function(e){return nt.Store.removeNotification(e)}}}),{displayName:"Global Notification"}),ot=ct.useContainer,st=ct.Provider,ut=n(619),lt=n(620),dt=n(196),pt=new ut.a({supportedChainIds:[137,80001]}),bt=window.env.NETWORK,jt=new lt.a({urls:{80001:"https://polygon-mumbai.infura.io/v3/4458cf4d1689497b9a38b1d6bbf05e78",137:"https://polygon-rpc.com/"},defaultChainId:(at=null!==(rt=_e[bt])&&void 0!==rt?rt:Le.testnet,parseInt(at,16))}),ft=function(e){return new dt.providers.Web3Provider(e)};function xt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(se.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.isAuthorized();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t(pt));case 4:return e.abrupt("return",t(jt));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ot,mt,vt,gt,yt,wt,kt,St,Et=function(){var e=Ve().activate,t=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",xt(e));case 1:case"end":return t.stop()}}),t)}))),[e]);return Object(r.useEffect)((function(){t()}),[t]),null},Ct=function(e){var t=e.children;return Object(y.jsxs)(ce.a,{getLibrary:ft,children:[Object(y.jsx)(Et,{}),t]})},It=n(621),Tt=x.a.img(Ot||(Ot=Object(j.a)(["\n  width: ","px;\n  height: ","px;\n"])),(function(e){var t=e.size;return null!==t&&void 0!==t?t:30}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:30})),Pt=function(e){var t=e.src,n=e.size,r=e.url;return r?Object(y.jsx)("a",{href:r,children:Object(y.jsx)(Tt,{size:n,src:t,alt:r})}):Object(y.jsx)(Tt,{size:n,src:t,alt:t})},Nt=n(63),qt=n(224),At=["title","loading","disabled","type"],Rt=x.a.div(mt||(mt=Object(j.a)(["\n  height: ","px;\n  width: ","px;\n  background-color: ",";\n  margin-right: ","px;\n"])),(function(e){var t=e.height;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.width;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"lightgray"}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0})),Mt=x.a.div(vt||(vt=Object(j.a)(["\n  color: ",";\n  text-align: ",";\n  font-size: ","px;\n  font-weight: ",";\n  margin-left: ","px;\n  margin-right: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  min-width: ","px;\n  overflow-wrap: break-word;\n"])),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"#1A202C"}),(function(e){return e.alignCenter?"center":"left"}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:18}),(function(e){var t=e.fw;return null!==t&&void 0!==t?t:400}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:10})),Dt=x.a.label(gt||(gt=Object(j.a)(["\n  color: ",";\n  text-align: ",";\n  font-size: ","px;\n  font-weight: ",";\n  margin-left: ","px;\n  margin-right: ","px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  min-width: ","px;\n  font-family: ",";\n"])),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"#1A202C"}),(function(e){return e.alignCenter?"center":"left"}),(function(e){var t=e.size;return null!==t&&void 0!==t?t:15}),(function(e){var t=e.fw;return null!==t&&void 0!==t?t:500}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:10}),(function(e){var t=e.ff;return null!==t&&void 0!==t?t:"Futura"})),zt=Object(x.a)(b.b)(yt||(yt=Object(j.a)(["\n  align-self: ",";\n  min-width: ","px;\n  padding: 16px 50px;\n  margin-top: ","px;\n  margin-bottom: ","px;\n  margin-right: ","px;\n  margin-left: ","px;\n  font-weight: 500;\n"])),(function(e){var t=e.align;return null!==t&&void 0!==t?t:"center"}),(function(e){var t=e.width;return null!==t&&void 0!==t?t:150}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mb;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mr;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0})),Lt=Object(x.a)(b.e)(wt||(wt=Object(j.a)(["\n  margin-right: 15px;\n"]))),Vt=function(e){var t=e.title,n=e.loading,r=e.disabled,a=e.type,i=Object(Nt.a)(e,At);return Object(y.jsx)(zt,Object(Je.a)({label:t,type:null!==a&&void 0!==a?a:"secondary",leftItem:n&&Object(y.jsx)(Lt,{size:23,color:"".concat("primary"===a?"#fff":"#4388dd")}),disabled:r||n},i))},Ut=x.a.div(kt||(kt=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: ","px;\n  width: 100%;\n  justify-content: ",";\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.align;if(!t)return"center";switch(t){case"left":return"flex-start";case"right":return"flex-end";default:return"center"}})),Gt=Object(x.a)(qt.b)(St||(St=Object(j.a)(["\n  margin-top: ","px;\n  width: 100%;\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0})),Ft=n.p+"static/media/arrow.8961c2a1.svg",$t=n.p+"static/media/metamask.09e5f554.svg",_t="UnsupportedChainIdError",Yt="eth_requestAccounts",Ht="wallet_switchEthereumChain",Kt="wallet_addEthereumChain";function Wt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(se.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return","MetaMask is not installed");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:Yt});case 5:return e.next=7,xt(t);case 7:return e.abrupt("return","");case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function Xt(){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(se.a)(le.a.mark((function e(){var t,n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.env.NETWORK,r=_e[n],null!==(t=window)&&void 0!==t&&t.ethereum&&n){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,window.ethereum.request({method:Ht,params:[{chainId:r}]});case 7:e.next=18;break;case 9:if(e.prev=9,e.t0=e.catch(4),console.log("e:",e.t0),4902!==e.t0.code){e.next=17;break}return e.next=15,ethereum.request({method:Kt,params:[Ye[r]]});case 15:e.next=18;break;case 17:console.log("Switch Ethereum network failed",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}var Jt,Zt,en,tn={Chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",Firefox:"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/",Brave:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",Edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm"},nn=function(e){return{install:{title:"Install MetaMask to use Indexer App",desc:"No MetaMask Extension found in the browser.  Please click the button to install the MetaMask Extension before connect with the network.",buttonTitle:"Install MetaMask in the extension market"},connect:{title:"Connect wallet to use Indexer App",desc:"Use the indexer app to connect with Subquery network, you can manage you accounts and projects inside the app.",buttonTitle:"Connect with MetaMask browser extension"},invalidAccount:{title:"Incorrect connected account with coordinator service",desc:"Please switch the connect account to ".concat(e),buttonTitle:"Switch account to use the admin app"},invalidNetwork:{title:"Unsupportted network Type",desc:"MetaMask connect with an unsupported network, please press the button to swith to the correct network",buttonTitle:"Swtich to the supportted network"}}},rn=x.a.div(Jt||(Jt=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  width: 100%;\n  margin-top: -100px;\n"]))),an=x.a.div(Zt||(Zt=Object(j.a)(["\n  display: flex;\n  padding: 24px;\n  align-items: center;\n  justify-content: space-between;\n  min-width: 450px;\n  cursor: pointer;\n"]))),cn=x.a.div(en||(en=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),on=function(){var e=Ve(),t=e.account,n=e.activate,a=e.error,i=Re().indexer,c=Ge(),o=De(),s=Object(r.useState)(!1),u=Object(h.a)(s,2),l=u[0],d=u[1],p=Object(r.useState)(""),b=Object(h.a)(p,2),j=b[0],f=b[1];Object(r.useEffect)((function(){d((null===a||void 0===a?void 0:a.name)===_t)}),[a]);var x=Object(r.useMemo)((function(){var e=nn(i),t=e.install,n=e.connect,r=e.invalidNetwork,a=e.invalidAccount;return o?l?r:c?a:n:t}),[l,o,c,t,i]),O=Object(r.useCallback)(Object(se.a)(le.a.mark((function e(){var t,r,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}return e.next=3,Xt();case 3:return e.abrupt("return");case 4:if(o){e.next=8;break}return(r=null!==(t=tn[It.browserName])&&void 0!==t?t:"")&&window.open(r,"_blank","noopener,noreferrer"),e.abrupt("return");case 8:if(c){e.next=13;break}return e.next=11,Wt(n);case 11:a=e.sent,f(a);case 13:case"end":return e.stop()}}),e)}))),[c,l,o]),m=Object(r.useMemo)((function(){return Object(y.jsxs)(an,{children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)(cn,{children:[Object(y.jsx)(Pt,{size:50,src:$t}),Object(y.jsx)(Dt,{ml:20,size:25,children:"MetaMask"})]}),Object(y.jsx)(Mt,{mt:10,children:x.buttonTitle})]}),Object(y.jsx)(Pt,{size:30,src:Ft})]})}),[x]);return Object(y.jsxs)(rn,{children:[Object(y.jsx)(Dt,{alignCenter:!0,size:35,fw:"400",children:x.title}),Object(y.jsx)(Mt,{alignCenter:!0,mt:15,children:x.desc}),Object(y.jsx)(Mt,{color:"red",alignCenter:!0,mt:15,children:j}),Object(y.jsx)(Vt,{mt:50,type:"secondary",title:"",onClick:O,leftItem:m})]})},sn=n(1239),un=n(1294),ln="".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.env.COORDINATOR_SERVICE_PORT,"/graphql"),dn=__DEV__?window.env.COORDINATOR_SERVICE_URL:ln,pn="".concat(window.location.protocol,"//").concat(window.location.hostname);function bn(e){return new sn.a({uri:e,cache:new un.a,defaultOptions:{watchQuery:{fetchPolicy:"network-only"}}})}var jn,fn,xn,hn,On,mn,vn,gn=n(412),yn=n.n(gn),wn=n(1290),kn=n(1288),Sn=x.a.div(jn||(jn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 18px;\n  background-color: white;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 650px;\n  min-height: 450px;\n"]))),En=(x.a.div(fn||(fn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),x.a.div(xn||(xn=Object(j.a)(["\n  margin-top: ","px;\n  width: 450px;\n"])),(function(e){var t;return null!==(t=e.mt)&&void 0!==t?t:0})),Object(x.a)(wn.a)(hn||(hn=Object(j.a)(["\n  width: 55%;\n  margin-bottom: 70px;\n  min-width: 650px;\n  max-width: 70%;\n"]))));Object(x.a)(kn.a)(On||(On=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 600px;\n  margin-top: 30px;\n"])));!function(e){e.onboarding="onboarding",e.authorisation="authorisation",e.register="register",e.sync="sync"}(mn||(mn={})),function(e){e.wait="wait",e.process="process",e.finish="finish"}(vn||(vn={}));var Cn,In,Tn,Pn,Nn,qn,An,Rn,Mn,Dn,zn,Ln,Vn,Un,Gn,Fn=Object.entries(mn).map((function(e){return Object(h.a)(e,1)[0]})).slice(1),$n=function(e){return Fn.findIndex((function(t){return t===e}))},_n=function(e,t){return e===t?vn.process:e>t?vn.finish:vn.wait},Yn=n.p+"static/media/cross.9aeef195.svg",Hn=x.a.div(Cn||(Cn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n"]))),Kn=Object(x.a)(qt.a)(In||(In=Object(j.a)(["\n  border-radius: 5px;\n  border: thin solid lightgray;\n  padding: 5px 10px;\n  margin-top: 5px;\n  font-size: 16px;\n"]))),Wn=x.a.option(Tn||(Tn=Object(j.a)(["\n  padding: 10px 10px;\n  background-color: green;\n"]))),Bn=function(e){var t=e.title,n=e.initialValue,a=e.placeholder,i=e.fieldKey,c=e.setFieldValue,o=e.options,s=e.errors,u=Object(r.useState)(n),l=Object(h.a)(u,2),d=l[0],p=l[1];return Object(y.jsxs)(Hn,{children:[Object(y.jsx)(Dt,{htmlFor:i,children:t}),!o&&Object(y.jsx)(Kn,{placeholder:a,name:i}),!!o&&Object(y.jsx)(Kn,{as:"select",name:i,onChange:function(e){var t=e.target.value;c&&c(i,t),p(t)},value:d,children:o.map((function(e){return Object(y.jsx)(Wn,{value:e,children:e},e)}))},i),!(null===s||void 0===s||!s[i])&&Object(y.jsx)(Mt,{mt:5,color:"red",size:15,children:s[i]})]})},Xn={content:{backgroundColor:"white",borderRadius:15,top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:900,minWidth:700,maxHeight:"90%",padding:0},overlay:{zIndex:50,backgroundColor:"rgba(0, 0, 0, 0.65)"}},Qn=function(){var e=et().modalData;return e&&e.visible?Object(y.jsx)(Jn,Object(Je.a)({},e)):null},Jn=function(e){var t=e.visible,n=e.title,r=e.onClose,a=e.currentStep,i=void 0===a?0:a,c=e.steps,o=e.type,s=e.loading;if(!c||i>c.length-1)return null;var u,l=c[i];return Object(y.jsxs)(yn.a,{isOpen:t,style:Xn,closeTimeoutMS:200,ariaHideApp:!1,children:[Object(y.jsxs)(tr,{onClick:function(){return r&&r()},children:[Object(y.jsx)(Mt,{fw:"500",size:20,children:n}),Object(y.jsx)(nr,{children:Object(y.jsx)(Pt,{size:18,src:Yn})})]}),Object(y.jsxs)(er,{children:[(null===c||void 0===c?void 0:c.length)>1&&Object(y.jsx)(rr,{size:"small",current:i,children:c.map((function(e,t){return Object(y.jsx)(En.Step,{status:_n(i,t),title:e.buttonTitle},e.title)}))}),l.form?(u=l,u.form?Object(y.jsx)(qt.c,{initialValues:u.form.formValues,validationSchema:u.form.schema,onSubmit:u.form.onFormSubmit,children:function(e){var t,n=e.status,r=e.errors,a=e.submitForm,i=e.setFieldValue,c=e.initialValues;return Object(y.jsxs)(ar,{children:[Object(y.jsxs)("div",{children:[null===(t=u.form)||void 0===t?void 0:t.items.map((function(e){var t=e.title,n=void 0===t?"":t,a=e.formKey,o=void 0===a?"":a,s=e.placeholder,u=void 0===s?"":s,l=e.options;return Object(y.jsx)(Bn,{title:n,fieldKey:o,initialValue:c[o],placeholder:u,setFieldValue:i,options:l,errors:r},n)})),u.desc&&Object(y.jsx)(Mt,{mt:20,size:13,color:"gray",children:u.desc})]}),Object(y.jsx)(Ut,{align:"right",mt:50,children:Object(y.jsx)(Vt,{width:260,mt:0,title:u.buttonTitle,onClick:a,loading:s||(null===n||void 0===n?void 0:n.loading)})})]})}}):null):function(e){return Object(y.jsxs)(ir,{children:[Object(y.jsxs)(cr,{children:[Object(y.jsx)(Mt,{fw:"500",mt:10,size:25,children:e.title}),Object(y.jsx)(Mt,{alignCenter:!0,mt:20,size:15,color:"gray",children:e.desc})]}),Object(y.jsx)(Ut,{align:"right",mt:60,children:Object(y.jsx)(Vt,{width:200,title:e.buttonTitle,onClick:function(){return e.onClick&&e.onClick(o)},loading:s})})]})}(l)]})]})},Zn=Jn,er=x.a.div(Pn||(Pn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  padding: 32px;\n  padding-bottom: 52px;\n"]))),tr=x.a.div(Nn||(Nn=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n  padding: 16px 32px;\n  border-bottom: 1px solid var(--sq-gray300);\n"]))),nr=x.a.div(qn||(qn=Object(j.a)(["\n  margin-top: 5px;\n"]))),rr=Object(x.a)(wn.a)(An||(An=Object(j.a)(["\n  width: 100%;\n  min-width: 350px;\n  margin-bottom: 40px;\n"]))),ar=Object(x.a)(qt.b)(Rn||(Rn=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),ir=x.a.div(Mn||(Mn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n"]))),cr=x.a.div(Dn||(Dn=Object(j.a)(["\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  align-items: center;\n"]))),or=n(227),sr=n.n(or),ur=function(e){var t=e.size,n=e.address;return Object(y.jsx)(sr.a,{diameter:t,seed:Object(or.jsNumberForAddress)(n)})},lr=function(e){var t=e.title,n=e.desc,a=e.buttons,i=e.name,c=e.account,o=Object(r.useMemo)((function(){return a.map((function(e){var t=e.title,n=e.type,r=e.loading,a=e.disabled,i=e.onClick;return Object(y.jsx)(Vt,{width:230,mb:20,title:t,loading:r,disabled:a,onClick:function(){return i(n)}},n)}))}),[a]);return Object(y.jsxs)(dr,{children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(pr,{children:Object(y.jsx)(br,{children:Object(y.jsx)(Mt,{size:30,fw:"bold",mr:20,children:t})})}),c?Object(y.jsxs)(br,{children:[Object(y.jsx)(ur,{address:null!==c&&void 0!==c?c:"",size:100}),Object(y.jsxs)(jr,{ml:20,children:[Object(y.jsx)(Mt,{children:i}),Object(y.jsx)(Mt,{mt:10,children:c}),Object(y.jsx)(Mt,{mt:10,children:n})]})]}):Object(y.jsxs)(jr,{children:[Object(y.jsx)(Mt,{color:"gray",size:15,mb:30,children:n}),!Object(oe.isEmpty)(a)&&Object(y.jsx)(Ut,{align:"left",children:o})]})]}),!!c&&!Object(oe.isEmpty)(a)&&Object(y.jsx)(fr,{children:o})]},t)},dr=x.a.div(zn||(zn=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  min-width: 1000px;\n  min-height: 250px;\n  width: 70%;\n  border: thin solid;\n  border-color: lightgray;\n  border-radius: 15px;\n  padding: 40px;\n  margin-bottom: 30px;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  }\n"]))),pr=x.a.div(Ln||(Ln=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 30px;\n"]))),br=x.a.div(Vn||(Vn=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),jr=x.a.div(Un||(Un=Object(j.a)(["\n  display: flex;\n  width: 80%;\n  flex-direction: column;\n  margin-left: ","px;\n"])),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0})),fr=x.a.div(Gn||(Gn=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),xr=n(141),hr=n(104),Or="Contract SDK or Signer not initialised",mr="Invalid deploymentId provided",vr="Amount can not be empty",gr="Controller can not be empty";function yr(e,t,n){return wr.apply(this,arguments)}function wr(){return(wr=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(vr);case 4:return e.next=6,t.sqToken.connect(n).increaseAllowance(t.staking.address,dt.utils.parseEther(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t,n,r,a){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(se.a)(le.a.mark((function e(t,n,r,a,i){var c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(vr);case 4:return e.next=6,t.indexerRegistry.connect(n).registerIndexer(dt.utils.parseEther(r),a,i);case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Er(){return(Er=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:return e.next=4,t.indexerRegistry.connect(n).updateMetadata(r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(){return(Cr=Object(se.a)(le.a.mark((function e(t,n){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:return r=t.indexerRegistry.connect(n).unregisterIndexer(),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(){return(Ir=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(gr);case 4:return e.next=6,t.indexerRegistry.connect(n).setControllerAccount(r);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(){return(Tr=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(mr);case 4:return e.next=6,t.queryRegistry.connect(n).startIndexing(Object(hr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(){return(Pr=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(mr);case 4:return e.next=6,t.queryRegistry.connect(n).updateIndexingStatusToReady(Object(hr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nr(){return(Nr=Object(se.a)(le.a.mark((function e(t,n,r){var a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}throw new Error(Or);case 2:if(r){e.next=4;break}throw new Error(mr);case 4:return e.next=6,t.queryRegistry.connect(n).stopIndexing(Object(hr.d)(r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qr,Ar,Rr,Mr,Dr,zr,Lr,Vr,Ur=function(){var e=Ve().account,t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Xe(),o=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,null===c||void 0===c?void 0:c.indexerRegistry.isIndexer(e);case 5:n=t.sent,i(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),i(!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[e,c]);return Object(r.useEffect)((function(){o()}),[o]),a},Gr=function(){var e=function(){var e=Re().indexer,t=Ve().account;return Object(r.useMemo)((function(){return!!t&&!!e&&t===e}),[t,e])}(),t=Ur();return Object(r.useMemo)((function(){return e&&t}),[e,t])},Fr=function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Ve().account,c=Xe(),o=Object(r.useCallback)(Object(se.a)(le.a.mark((function e(){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===c||void 0===c?void 0:c.indexerRegistry.getController(null!==i&&void 0!==i?i:"");case 3:t=e.sent,a("0x0000000000000000000000000000000000000000"===t?"":t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(void 0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i,c]);return Object(r.useEffect)((function(){o()}),[o]),{controller:n,getController:o}},$r=function(e,t){var n=Object(r.useState)("0.00"),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Xe(),s=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n,r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o&&e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.sqToken.balanceOf(e);case 5:n=t.sent,r=Number(Object(xr.c)(n,18)).toFixed(2),c(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Get token balance failed for:",e);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e,o]);return Object(r.useEffect)((function(){s()}),[s,t]),{tokenBalance:i,getTokenBalance:s}},_r=function(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Ve().library,o=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n,r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&c){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,null===c||void 0===c?void 0:c.getBalance(e);case 5:n=t.sent,r=Number(Object(xr.c)(n,18)).toFixed(4),i(r),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Get balance failed for:",e);case 13:case"end":return t.stop()}}),t,null,[[2,10]])}))),[e]);return Object(r.useEffect)((function(){o()}),[o]),a},Yr=function(){var e=Ve().account,t=Xe(),n=Object(r.useState)(),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Object(r.useCallback)(Object(se.a)(le.a.mark((function n(){var r,a;return le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,null===t||void 0===t?void 0:t.indexerRegistry.metadata(e);case 5:if(r=n.sent){n.next=8;break}return n.abrupt("return");case 8:return n.next=10,Object(hr.c)(Object(hr.b)(r));case 10:a=n.sent,c(a),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(2),console.error("Failed to get indexer metadata");case 17:case"end":return n.stop()}}),n,null,[[2,14]])}))),[t,e]);return Object(r.useEffect)((function(){o()}),[o]),{metadata:i,fetchMetadata:o}},Hr=function(){var e=Ve().chainId;return Object(r.useMemo)((function(){return 80001===e?"MATIC":"DEV"}),[e])};!function(e){e.query="onfinality/subql-query",e.substrateNode="onfinality/subql-node",e.cosmos="onfinality/subql-node-cosmos",e.avalanche="onfinality/subql-node-avalanche"}(qr||(qr={})),function(e){e[e.NOTINDEXING=0]="NOTINDEXING",e[e.INDEXING=1]="INDEXING",e[e.READY=2]="READY"}(Ar||(Ar={})),function(e){e.NotIndexing="NOT INDEXING",e.Started="STARTED",e.Indexing="INDEXING",e.Ready="READY",e.Terminated="TERMINATED"}(Rr||(Rr={})),function(e){e.Open="OPEN",e.Close="CLOSE"}(Mr||(Mr={})),function(e){e.unregister="unregister",e.updateMetaData="updateMetadata"}(Dr||(Dr={})),function(e){e.addProject="addProject"}(zr||(zr={})),function(e){e.StartIndexing="StartIndexing",e.AnnounceIndexing="AnnounceIndexing",e.RestartProject="RestartProject",e.AnnounceReady="AnnounceReady",e.StopProject="StopProject",e.AnnounceNotIndexing="AnnounceNotIndexing",e.StopIndexing="StopIndexing",e.RemoveProject="Remove Project"}(Lr||(Lr={})),function(e){e.PaygOpen="Open PAYG",e.PaygChangePrice="Change Price",e.PaygClose="Close PAYG"}(Vr||(Vr={}));var Kr,Wr,Br,Xr,Qr,Jr,Zr=n(101);!function(e){e.name="name",e.proxyEndpoint="proxyEndpoint",e.amount="amount",e.rate="rate"}(Jr||(Jr={}));var ea,ta=Zr.c((Kr={},Object(ee.a)(Kr,Jr.name,Zr.d().defined()),Object(ee.a)(Kr,Jr.proxyEndpoint,Zr.d().defined()),Object(ee.a)(Kr,Jr.amount,Zr.b().min(1e3,"Staking token should large than 1000 SQT").defined()),Object(ee.a)(Kr,Jr.rate,Zr.b().min(0,"Rate should be between 0 and 100").max(100,"Rate should be between 0 and 100").defined()),Kr)),na=(Wr={},Object(ee.a)(Wr,Jr.name,""),Object(ee.a)(Wr,Jr.proxyEndpoint,""),Object(ee.a)(Wr,Jr.amount,0),Object(ee.a)(Wr,Jr.rate,0),Wr);!function(e){e.name="name",e.proxyEndpoint="proxyEndpoint"}(ea||(ea={}));var ra,aa=Zr.c((Br={},Object(ee.a)(Br,Jr.name,Zr.d().defined()),Object(ee.a)(Br,Jr.proxyEndpoint,Zr.d().defined()),Br)),ia=function(e){var t;return t={},Object(ee.a)(t,Jr.name,null===e||void 0===e?void 0:e.name),Object(ee.a)(t,Jr.proxyEndpoint,null===e||void 0===e?void 0:e.url),t};!function(e){e.privateKey="privateKey"}(ra||(ra={}));var ca;Zr.c(Object(ee.a)({},ra.privateKey,Zr.d().defined())),Object(ee.a)({},ra.privateKey,"");!function(e){e.deploymentId="deploymentId",e.networkEndpoint="networkEndpoint",e.networkDictionary="networkDictionary",e.nodeVersion="nodeVersion",e.queryVersion="queryVersion",e.forceEnabled="forceEnabled",e.paygPrice="paygPrice",e.paygExpiration="paygExpiration",e.paygThreshold="paygThreshold",e.paygOverflow="paygOverflow"}(ca||(ca={}));var oa,sa=new RegExp(/^Qm[1-9A-HJ-NP-Za-km-z]{44}/i),ua=Zr.c(Object(ee.a)({},ca.deploymentId,Zr.d().matches(sa,"Invalid deployment id format").defined())),la=Object(ee.a)({},ca.deploymentId,""),da=function(e){var t,n;return n={},Object(ee.a)(n,ca.networkEndpoint,e.networkEndpoint),Object(ee.a)(n,ca.networkDictionary,null!==(t=e.networkDictionary)&&void 0!==t?t:""),Object(ee.a)(n,ca.nodeVersion,e.nodeVersion),Object(ee.a)(n,ca.queryVersion,e.queryVersion),Object(ee.a)(n,ca.forceEnabled,e.forceEnabled),n},pa=Zr.c((Xr={},Object(ee.a)(Xr,ca.networkEndpoint,Zr.d().defined()),Object(ee.a)(Xr,ca.networkDictionary,Zr.d().optional()),Object(ee.a)(Xr,ca.nodeVersion,Zr.d().defined()),Object(ee.a)(Xr,ca.queryVersion,Zr.d().defined()),Object(ee.a)(Xr,ca.forceEnabled,Zr.a().required()),Xr));!function(e){e.paygPrice="paygPrice",e.paygPeriod="paygPeriod"}(oa||(oa={}));var ba,ja,fa,xa,ha,Oa,ma=function(e){var t;return t={},Object(ee.a)(t,oa.paygPrice,e.paygPrice),Object(ee.a)(t,oa.paygPeriod,e.paygExpiration),t},va=Zr.c((Qr={},Object(ee.a)(Qr,oa.paygPrice,Zr.d().defined()),Object(ee.a)(Qr,oa.paygPeriod,Zr.b().defined()),Qr)),ga=(ba={},Object(ee.a)(ba,Dr.unregister,"Unregister"),Object(ee.a)(ba,Dr.updateMetaData,"Update Metadata"),ba),ya=function(e,t){return{title:ga[e],type:e,onClick:t}},wa=(ja={},Object(ee.a)(ja,Dr.updateMetaData,"Update Indexer Metadata"),Object(ee.a)(ja,Dr.unregister,"Unregister Indexer Account"),ja);!function(e){e.configController="configController",e.removeAccount="removeAccount",e.withdraw="widthdraw"}(fa||(fa={})),function(e){e.MetadataUpated="MetadataUpated",e.ControllerUpdated="ControllerUpdated"}(xa||(xa={})),function(e){e.NotIndexing="NotIndexing",e.Started="Started",e.Indexing="Indexing",e.Ready="Ready",e.Terminated="Terminated"}(ha||(ha={})),function(e){e.Loading="Loading",e.Succeed="Succeed",e.Failed="Failed"}(Oa||(Oa={}));var ka,Sa,Ea,Ca,Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{duration:e,onScreen:t}},Ta={project:{start:{title:"Indexing Project",desc:"Start indexing project will start the subquery node service indexing the project and start a query service at the same time. It takes around 1 mins to start the services, you can see the progress and related information after everything is ready."},stop:{title:"Stop Indexing the Project",desc:"Stop indexing the project will terminate the node and query services, once the services stopped, the service status will change to terminated. You can restart indexing the project at any time."},restart:{title:"Restart Project",desc:"Restart indexing project will start the previous subquery node service to index the project, and start a query service at the same time. You can see the progress and related information after everything is ready."},remove:{title:"Are you sure to remove the project",desc:"Remove project will remove the project and service containers from coordinator service and database, the indexing data will be removed at the same time. You can add the project back at any time, but need to indexing from the beginning."}},announce:{indexing:{title:"Update Status on Subquery Network",desc:"Send transaction to start indexing the project on contract, the controller account on coordinator service will start to update the status of indexing service on the contract once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."},ready:{title:"Update Indexing To Ready",desc:"Send transaction to change indexing status to ready on contract, the explorer will display you query endpoint once the transaction completed. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."},notIndexing:{title:"Announce Not Indexing the Project",desc:"Send transaction to change indexing status to not indexing on contract, the project status will change to not indexing on the network. The transaction processing time may take around 10s, it depends on the network and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask."}},payg:{instruction:{title:"Flex Plan",desc:["The Flex Plan is a fast and transactional payment plan. As an Indexer, you can advertise your Flex Plan price for each SubQuery project that you have announced you are ready to index.","Consumers can make as many requests to your projects as they wish and will be charged at a price per request. At the end of an Era, these tokens will be distributed to all participating indexers based on the Cobb-Douglas production function."],sub:"Learn more ",link:"https://kepler.thechaindata.com/",button:"Enable Flex Plan"},open:{title:"Enable Flex Plan",desc:"This will open the function of pay-as-you-go, which supports micro-payment and instant requests. The query service will based on HTTP and p2p network at the same time. If consumer establish the service, the service will be in the form of state channel."},channels:{title:"Flex Plans",tabs:{open:"Ongoing",expired:"Expired",closed:"Closed"}}},paygChangePrice:{title:"Change Price",desc:"This will modify the cost of per query, the price of the established state channel will remain unchanged, and the new state channel will use the new price"},paygClose:{title:"Close PAYG",desc:"This will turn off the function of pay-as-you-go, the already established state channel will not be affected, and the new state channel will not be established."}},Pa=Ta.project,Na=Ta.announce,qa=Ta.payg,Aa=function(e,t,n){return{title:e,action:t,color:n}},Ra=(ka={},Object(ee.a)(ka,Vr.PaygOpen,"Open PAYG"),Object(ee.a)(ka,Vr.PaygChangePrice,"Change Price"),Object(ee.a)(ka,Vr.PaygClose,"Close PAYG"),Sa={},Object(ee.a)(Sa,Lr.StartIndexing,"Start Indexing Project"),Object(ee.a)(Sa,Lr.RestartProject,"Restart Indexing Project"),Object(ee.a)(Sa,Lr.AnnounceIndexing,"Announce Indexing Project"),Object(ee.a)(Sa,Lr.AnnounceReady,"Publish Indexing to Ready"),Object(ee.a)(Sa,Lr.StopProject,"Stop Project"),Object(ee.a)(Sa,Lr.RemoveProject,"Remove Project"),Object(ee.a)(Sa,Lr.AnnounceNotIndexing,"Announce Not Indexing Project"),Object(ee.a)(Sa,Lr.StopIndexing,"Stop Indexing"),Sa),Ma=function(e,t,n){return{formValues:da(e),schema:pa,onFormSubmit:n,items:[{formKey:ca.networkEndpoint,title:"Indexing Network Endpiont",placeholder:"wss://polkadot.api.onfinality.io/public-ws"},{formKey:ca.networkDictionary,title:"Network Dictionary Endpiont",placeholder:"https://api.subquery.network/sq/subquery/dictionary-polkadot"},{formKey:ca.nodeVersion,title:"Node Image Version",options:t.node},{formKey:ca.queryVersion,title:"Query Image Version",options:t.query},{formKey:ca.forceEnabled,title:"Enable Force Start",options:["true","false"]}]}},Da=function(e,t){return{formValues:ma(e),schema:va,onFormSubmit:t,items:[{formKey:oa.paygPrice,title:"Advertise a price per 1,000 requests (SQT)",placeholder:"300"},{formKey:oa.paygPeriod,title:"Validity Period (days)",placeholder:"Set a validity period"}]}},za=(Ea={},Object(ee.a)(Ea,Rr.Started,{title:"Ready to indexing the project on Suquery Network",description:"The current project has been alreay started, check the progress and logs make sure indexing is alright. Try press the Announce Indexing button to annouce indexing this project on Subquery Network. You can also try to restart indexing if something wrong happens."}),Object(ee.a)(Ea,Rr.Terminated,{title:"Status Inconsistent",description:"The current indexing service for this project is terminated but the indexing service status on Subquery Network is still INDEXING, we encourage you to press the Announce NotIndexing button to change the online status to NOTINDEXING as well"}),Ea),La=(Ca={},Object(ee.a)(Ca,ha.Started,{type:"success",title:"Project is starting",message:"Starting project may take around 5 seconds",dismiss:Ia()}),Object(ee.a)(Ca,ha.Terminated,{type:"success",title:"Project Terminated",message:"The project has been stopped, you can restart or update the status on network to not indexing",dismiss:Ia()}),Ca),Va=function(e){var t=e.length;return"".concat(e.substring(0,15),"...").concat(e.substring(t-16,t-1))};function Ua(e,t){return{type:"default",title:e,message:"Processing transaction may take around 20s: ".concat(Va(t)),dismiss:Ia(5e4,!0)}}function Ga(e){return{type:"success",title:"Transaction Succeed",message:"".concat(e.toLowerCase()," completed"),dismiss:Ia()}}function Fa(e){return{type:"danger",title:"Transaction Failed",message:"".concat(e),dismiss:Ia()}}function $a(e,t,n,r,a){return _a.apply(this,arguments)}function _a(){return(_a=Object(se.a)(le.a.mark((function e(t,n,r,a,i){var c,o,s;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.dispatchNotification,o=r.removeNotification,s=c(Ua(t,n.hash)),e.prev=2,e.next=5,n.wait(1);case 5:e.sent.status?(a&&a(),c(Ga(t))):(i&&i(),c(Fa(n.hash))),o(s),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Transaction Failed:",e.t0),c(Fa(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var Ya=Object(Je.a)(Object(Je.a)({},wa),{},Object(ee.a)({},fa.configController,"Update Controller")),Ha=function(){var e=Ue(),t=Xe(),n=ot(),a=Object(r.useCallback)((function(n){var r;return r={},Object(ee.a)(r,Dr.updateMetaData,(function(){return function(e,t,n){return Er.apply(this,arguments)}(t,e,n)})),Object(ee.a)(r,Dr.unregister,(function(){return function(e,t){return Cr.apply(this,arguments)}(t,e)})),Object(ee.a)(r,fa.configController,(function(){return function(e,t,n){return Ir.apply(this,arguments)}(t,e,n)})),r}),[t,e]);return Object(r.useCallback)(function(){var e=Object(se.a)(le.a.mark((function e(t,r,i,c){var o,s,u;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=a(r)[t],s=Ya[t],e.next=5,o();case 5:return u=e.sent,i(),e.next=9,$a(s,u,n,c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),[a])},Ka=function(e){var t=Ue(),n=Xe(),a=ot(),i=Object(r.useMemo)((function(){var r;return r={},Object(ee.a)(r,Lr.AnnounceIndexing,(function(){return function(e,t,n){return Tr.apply(this,arguments)}(n,t,e)})),Object(ee.a)(r,Lr.AnnounceReady,(function(){return function(e,t,n){return Pr.apply(this,arguments)}(n,t,e)})),Object(ee.a)(r,Lr.AnnounceNotIndexing,(function(){return function(e,t,n){return Nr.apply(this,arguments)}(n,t,e)})),r}),[n,t,e]);return Object(r.useCallback)(function(){var e=Object(se.a)(le.a.mark((function e(t,n,r){var c,o,s;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=i[t],o=Ra[t],e.next=5,c();case 5:return s=e.sent,n(),e.next=9,$a(o,s,a,r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[i])};var Wa,Ba,Xa,Qa,Ja,Za,ei,ti,ni,ri,ai,ii,ci,oi,si,ui,li,di,pi,bi,ji,fi={controller:{type:"danger",title:"Insufficient Balance",message:"The controller account has insufficient assets to pay the transaction fee. Please top up your controller account ASAP.",dismiss:Ia(5e4,!1)}},xi={indexer:{title:"Indexer Account",name:"Subquery Master",buttonTitle:"Unregister",desc:""},controller:{title:"Controller Account",name:"Controller",buttonTitle:"Update Controller",desc:""},emptyController:{title:"Controller Account",name:"",buttonTitle:"Config Controller",desc:"Controller account is a delegator of the indexer, need to config a controller account before you start the journey to indexing the projects, controller account will config in you coordinator service and send the status of the indexing services to the contract autimatically"}},hi=x.a.div(Wa||(Wa=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 0px 50px;\n  min-height: 630px;\n"]))),Oi=function(){var e=Object(r.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(0),c=Object(h.a)(i,2),o=c[0],s=c[1],u=Object(r.useState)(),d=Object(h.a)(u,2),p=d[0],b=d[1],j=Ve().account,f=Gr(),x=Re().indexer,O=Yr(),m=O.metadata,v=O.fetchMetadata,g=Ha(),w=Ge(),k=function(e){var t=Object(r.useState)(!1),n=Object(h.a)(t,2),a=n[0];return n[1],a}(),S=Fr().controller,E=_r(S),C=_r(j),I=ot().dispatchNotification,T=X().setPageLoading,P=Object(l.g)(),N=Hr(),q=Object(pe.a)(ye),A=Object(h.a)(q,1)[0];xi.controller.desc="Balance: ".concat(E," ").concat(N);var R=S?xi.controller:xi.emptyController,M=xi.indexer;Object(r.useEffect)((function(){T(Object(oe.isUndefined)(j)||Object(oe.isUndefined)(x))}),[j,x]),Object(r.useEffect)((function(){!E||parseFloat(E)>parseFloat("0.2")||I(fi.controller)}),[E]);var D,z=function(e){b(e),a(!0)},L=function(){a(!1),setTimeout((function(){return s(0)}),1e3)},V=Object(r.useMemo)((function(){var e;return null!==(e=null===m||void 0===m?void 0:m.name)&&void 0!==e?e:" "}),[m]),U=[ya(Dr.updateMetaData,z),ya(Dr.unregister,z)],G=[{title:"Manange Controllers",onClick:function(){return P.push("/controller-management")}}],F=Object(r.useMemo)((function(){return function(e,t){return Object(ee.a)({},Dr.updateMetaData,[{index:0,title:"Update Indexer Metadata",desc:"Input valid indexer name and proxy server endpoint to update the metadata, make sure the proxy endpoint is valid",buttonTitle:"Update Metadata",form:{formValues:ia(t),schema:aa,onFormSubmit:e,items:[{formKey:ea.name,title:"Indexer Name"},{formKey:ea.proxyEndpoint,title:"Proxy Server Endpoint"}]}}])}(function(){var e=Object(se.a)(le.a.mark((function e(t,n){var r,a,i;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setStatus({loading:!0}),r=t[ea.name],a=t[ea.proxyEndpoint],e.next=5,Object(hr.e)(r,a);case 5:return i=e.sent,e.next=8,g(Dr.updateMetaData,i,L,v);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m)}),[m]),$=function(){var e=Object(se.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:P.replace("/register");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=(D=function(){return g(Dr.unregister,"",L,$)},Object(ee.a)({},Dr.unregister,[{index:0,title:"Unregister from network",desc:"Sorry to see the indexer unregister from the Subquery Network, please note that all the data in your coordinator service will be removed, and the staking token will deposit to your current account once transction processed",buttonTitle:"Unregister",onClick:D}])),Y=Object(r.useMemo)((function(){return Object(Je.a)(Object(Je.a)({},_),F)}),[m]);return Object(y.jsxs)(hi,{children:[w&&f&&Object(y.jsx)(lr,{title:M.title,name:V,buttons:U,account:null!==j&&void 0!==j?j:"",desc:"Balance: ".concat(C," ").concat(N)},j),(f||k)&&Object(y.jsx)(lr,{title:R.title,name:R.name,account:S,buttons:G,desc:null===R||void 0===R?void 0:R.desc},j),p&&Object(y.jsx)(Zn,{visible:n,title:wa[p],onClose:L,steps:Y[p],currentStep:o,type:p})]})},mi=n(24),vi=x.a.div(Ba||(Ba=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 18px;\n  margin-bottom: 50px;\n  padding: 60px;\n  min-width: 800px;\n  max-width: 50%;\n  min-height: 450px;\n"]))),gi=x.a.div(Xa||(Xa=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),yi=function(e){var t=e.item,n=e.onClick,r=e.loading,a=e.link,i=t.title,c=t.desc,o=t.buttonTitle;return Object(y.jsxs)(vi,{children:[Object(y.jsxs)(gi,{children:[Object(y.jsx)(Mt,{alignCenter:!0,size:35,fw:"bold",children:i}),Object(y.jsxs)(Mt,{alignCenter:!0,mt:35,children:[c,a]})]}),Object(y.jsx)(Vt,{mt:80,type:"primary",title:o,loading:r,onClick:n})]})},wi={mainTitle:"Manage Controller Accounts",title:"Create and manage your controller accounts here",subTitle:"You can Configure the account you wish to set as the controller on the coordinator services",button:"Create an Account"},ki={title:"Manage Controller Accounts",desc:"You can create as many accounts as you want. You can then configure the one you wish to set as the controller on coordinator services.",buttonTitle:"Create an Account"},Si={active:"Actived",activeBtn:"Active",widthdrawBtn:"Withdraw",removeBtn:"Remove"},Ei={configController:{title:"Activate your controller on contract",desc:"Press the button to send the transaction to network and update the new controller account on contract. The transaction processing time may take around 10s, it depends on the network status and gas fee. You will see the processing status on the top of the page once you confim the transaction on the MetaMask.",buttonTitle:"Send Transction"},removeAccount:{title:"Remove this account",desc:"This action will remove the account from your coordinator service. You will not be able to find this account again once you confirm removal. Please make sure there has no assets in this account. Are you sure you want to remove it?",buttonTitle:"Confirm Removal"},withdraw:{title:"Withdraw from controller account",desc:"You are about to withdraw the full balance from this account to your index account. The amount you receive will be the full balance minus the transaction fee. Transaction fee is determined by the network.",buttonTitle:"Confirm Withdrawl"}},Ci={widthdraw:{loading:{type:"default",title:"Controller withdrawl",message:function(e){return"Withdraw all the asset for controller: ".concat(e,"  may take 20s")}},success:{type:"success",title:"Controller withdrawl Succeed",message:function(e){return"Withdraw controller: ".concat(e," assets successfully")}},failed:{type:"danger",title:"Controller withdrawl Failed",message:function(e){return"Withdraw controller: ".concat(e," assets failed")}}}},Ii=function(e,t){return{index:0,title:e.title,desc:e.desc,buttonTitle:e.buttonTitle,onClick:t}},Ti=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Ci.widthdraw.loading,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:Ia(3e4,!0)}},Pi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Ci.widthdraw.success,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:Ia()}},Ni=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Ci.widthdraw.failed,n=t.type,r=t.title,a=t.message;return{type:n,title:r,message:a(e),dismiss:Ia()}},qi=function(e,t){return e?t:Object(y.jsx)(f.b,{})},Ai=x.a.div(Qa||(Qa=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 600px;\n  padding: 30px 100px;\n  padding-bottom: 80px;\n  overflow-y: scroll;\n  min-width: 1200px;\n"]))),Ri=x.a.div(Ja||(Ja=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Mi=x.a.div(Za||(Za=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: ","px;\n"])),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0})),Di=x.a.div(ei||(ei=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n"]))),zi=x.a.div(ti||(ti=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 20px;\n  border-color: gray;\n  border-radius: 10px;\n  background-color: white;\n  align-items: center;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n"]))),Li=x.a.div(ni||(ni=Object(j.a)(["\n  display: flex;\n  flex: 6;\n  align-items: center;\n"]))),Vi=x.a.div(ri||(ri=Object(j.a)(["\n  display: flex;\n  flex: 4;\n  flex-direction: column;\n  margin: 0px 20px;\n"]))),Ui=x.a.div(ai||(ai=Object(j.a)(["\n  display: flex;\n  flex: 2;\n"]))),Gi=x.a.div(ii||(ii=Object(j.a)(["\n  display: flex;\n  flex: 2;\n  align-items: center;\n"]))),Fi=x.a.div(ci||(ci=Object(j.a)(["\n  display: flex;\n  flex: 2;\n  justify-content: flex-end;\n  min-width: 300px;\n"]))),$i=function(e){var t=e.id,n=e.name,r=e.controller,a=e.address,i=e.onConfigController,c=e.onRemoveController,o=e.onWithdraw,s=Si,u=s.active,l=s.activeBtn,d=s.widthdrawBtn,p=s.removeBtn,j=a===(null===r||void 0===r?void 0:r.toLocaleLowerCase()),f=_r(a),x=0===Number(f),h={id:t,address:a},O=Hr();return Object(y.jsxs)(zi,{children:[Object(y.jsxs)(Li,{onClick:function(){return function(e){var t="https://mumbai.polygonscan.com/address/".concat(e);window.open(t,"_blank","noopener,noreferrer")}(a)},children:[Object(y.jsx)(ur,{address:a,size:70}),Object(y.jsxs)(Vi,{children:[Object(y.jsx)(Mt,{size:18,fw:"600",children:n}),Object(y.jsx)(Mt,{size:15,color:"gray",mt:5,children:a})]}),Object(y.jsx)(Ui,{children:qi(!!f,Object(y.jsx)(Mt,{children:"".concat(f," ").concat(O)}))}),Object(y.jsx)(Gi,{children:j&&Object(y.jsx)(b.f,{text:u,state:"success"})})]}),qi(!Object(oe.isUndefined)(r)&&!Object(oe.isUndefined)(f),Object(y.jsxs)(Fi,{children:[!j&&Object(y.jsx)(Vt,{title:l,onClick:function(){return i(h)}}),!j&&x&&Object(y.jsx)(Vt,{ml:10,title:p,onClick:function(){return c(h)}}),!x&&Object(y.jsx)(Vt,{ml:10,title:d,onClick:function(){return o(h)}})]}))]})},_i=function(){var e=wi,t=ki,n=Object(r.useState)(),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(),s=Object(h.a)(o,2),u=s[0],l=s[1],d=Object(r.useState)(!1),p=Object(h.a)(d,2),b=p[0],j=p[1],f=ot(),x=f.dispatchNotification,O=f.removeNotification,m=Fr(),v=m.controller,g=m.getController,w=Ha(),k=X().setPageLoading,S=Object(pe.a)(ve),E=Object(h.a)(S,1)[0],C=Object(pe.a)(me),I=Object(h.a)(C,2),T=I[0],P=I[1].loading,N=Object(de.a)(ge),q=Object(h.a)(N,1)[0],A=Object(de.a)(Oe),R=Object(h.a)(A,2),M=R[0],D=R[1].data;Object(r.useEffect)((function(){k(Object(oe.isUndefined)(D)),M()}),[D]);var z,L,V,U=function(e){return e.toLowerCase()===(null===v||void 0===v?void 0:v.toLowerCase())},G=Object(r.useMemo)((function(){if(!D||Object(oe.isEmpty)(null===D||void 0===D?void 0:D.controllers))return[];var e=D.controllers,t=e.find((function(e){var t=e.address;return U(t)}));return t?[t].concat(Object(mi.a)(e.filter((function(e){var t=e.address;return!U(t)})))):e}),[D,v]),F=function(){var e=Object(se.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.next=4,M();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){return function(t){l(t),c(e),j(!0)}},_=function(){return j(!1)},Y=(z=Object(se.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({variables:{id:null===u||void 0===u?void 0:u.id}});case 2:return e.next=4,M();case 4:_();case 5:case"end":return e.stop()}}),e)}))),Object(ee.a)({},fa.removeAccount,[Ii(Ei.removeAccount,z)])),H=(L=Object(se.a)(le.a.mark((function e(){var t,n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(),t=null===u||void 0===u?void 0:u.address,n=x(Ti(t)),e.next=5,q({variables:{id:null===u||void 0===u?void 0:u.id}});case 5:return r=e.sent,O(n),r.data.withrawController?x(Pi(t)):x(Ni(t)),e.next=10,M();case 10:case"end":return e.stop()}}),e)}))),Object(ee.a)({},fa.withdraw,[Ii(Ei.withdraw,L)])),K=(V=function(){var e;return w(fa.configController,null!==(e=null===u||void 0===u?void 0:u.address)&&void 0!==e?e:"",_,g)},Object(ee.a)({},fa.configController,[Ii(Ei.configController,V)])),W=Object(Je.a)(Object(Je.a)(Object(Je.a)({},K),H),Y);return Object(y.jsxs)(Ai,{children:[!Object(oe.isEmpty)(G)&&Object(y.jsxs)(Ri,{children:[Object(y.jsxs)(Mi,{children:[Object(y.jsx)(Mt,{size:30,fw:"bold",mr:20,children:e.mainTitle}),Object(y.jsx)(Mt,{color:"gray",mt:5,children:e.title}),Object(y.jsx)(Mt,{color:"gray",children:e.subTitle})]}),Object(y.jsx)(Vt,{title:e.button,type:"primary",loading:P,onClick:F})]}),!Object(oe.isEmpty)(G)&&Object(y.jsx)(Mi,{mt:50,children:!!G&&G.map((function(e,t){return Object(y.jsx)($i,Object(Je.a)({controller:v,name:"Account ".concat(t+1),onConfigController:$(fa.configController),onRemoveController:$(fa.removeAccount),onWithdraw:$(fa.withdraw)},e),e.id)}))}),Object(oe.isEmpty)(G)&&Object(y.jsx)(Di,{children:Object(y.jsx)(yi,{item:{title:t.title,desc:t.desc,buttonTitle:t.buttonTitle},onClick:F})}),i&&Object(y.jsx)(Zn,{visible:b,onClose:_,steps:W[i],type:i})]})},Yi=n.p+"static/media/discord.46ef476e.svg",Hi=n.p+"static/media/github.3c2fbcc1.svg",Ki=n.p+"static/media/linkendin.077ef4b2.svg",Wi=n.p+"static/media/matrix.0fc904a9.svg",Bi=n.p+"static/media/medium.b5c13839.svg",Xi=n.p+"static/media/telegram.224cb085.svg",Qi=n.p+"static/media/twitter.ab5c408e.svg",Ji=function(e,t){return{src:e,url:t}},Zi=[Ji(Xi,"https://t.me/subquerynetwork"),Ji(Yi,"https://www.linkedin.com/company/subquery--"),Ji(Hi,"https://github.com/subquery/subql"),Ji(Ki,"https://www.linkedin.com/company/subquery"),Ji(Bi,"https://subquery.medium.com/"),Ji(Wi,"https://matrix.to/#/#subquery:matrix.org"),Ji(Qi,"https://twitter.com/subquerynetwork")],ec=x.a.div(oi||(oi=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: var(--sq-primary-blue);\n  min-height: 150px;\n  width: 100%;\n"]))),tc=x.a.div(si||(si=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-bottom: solid 1px white;\n  padding-left: 80px;\n  padding-right: 100px;\n  align-items: center;\n  min-height: 120px;\n  width: 100%;\n"]))),nc=x.a.div(ui||(ui=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  min-width: 550px;\n  height: 100%;\n"]))),rc=function(){var e=Object(l.h)();return Ge()||["/project/","/account"].includes(e.pathname)?null:Object(y.jsxs)(ec,{children:[Object(y.jsxs)(tc,{children:[Object(y.jsx)(Mt,{mw:160,color:"white",fw:"700",size:30,children:"Follow Us"}),Object(y.jsx)(nc,{children:Zi.map((function(e){var t=e.src,n=e.url;return Object(y.jsx)(Pt,{size:50,src:t,url:n},n)}))})]}),Object(y.jsx)(Mt,{ml:80,mt:5,color:"white",fw:"400",size:10,children:"SubQuery \xa9 2021"})]})},ac=n(176),ic=n.n(ac),cc=n.p+"static/media/subquery.8b4df4b6.svg",oc=x.a.div(li||(li=Object(j.a)(["\n  display: flex;\n  width: 100vw;\n  align-items: center;\n  justify-content: space-between;\n  min-height: 80px;\n  padding: 0px 40px;\n  border-bottom: 1px solid lightgray;\n"]))),sc=x.a.div(di||(di=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),uc=x.a.div(pi||(pi=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0px 20px;\n  min-width: 260px;\n  height: 55px;\n"])));!function(e){e.account="Account",e.network="Network",e.projects="Projects"}(ji||(ji={}));var lc,dc,pc,bc,jc,fc=Object(x.a)(u.b)(bi||(bi=Object(j.a)(["\n  margin-left: 50px;\n  margin-top: 20px;\n  color: #1a202c;\n  text-decoration: none;\n  font-family: Futura;\n  font-size: 16px;\n  :hover {\n    text-decoration: underline;\n  }\n"]))),xc=function(){var e=Ve(),t=e.account,n=e.deactivate,a=Object(l.h)().pathname,i=Ge(),c=Gr(),o=Fr(),s=$r(t,a).tokenBalance,u={fontWeight:500,color:"#4388dd"},d={border:"unset !important",padding:15,width:100},p=function(e,t){return{key:e,label:t}},j=function(e){"disconnect"===e&&n()},f=Object(r.useMemo)((function(){return"/"===a}),[a]),x=Object(r.useMemo)((function(){return[p("balance","Token: ".concat(s," SQT")),p("disconnect","Disconnect")]}),[s]),h=Object(r.useCallback)((function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(fc,{to:"/account",activeStyle:u,children:ji.account}),Object(y.jsx)(fc,{to:"/network",activeStyle:u,children:ji.network}),o&&Object(y.jsx)(fc,{to:"/projects",activeStyle:u,children:ji.projects})]})}),[o]);return Object(y.jsxs)(oc,{children:[Object(y.jsxs)(sc,{children:[Object(y.jsx)("img",{src:cc,alt:"subquery"}),!f&&c&&h()]}),i&&Object(y.jsxs)(uc,{children:[Object(y.jsx)(Rt,{width:30,color:"#f6f9fc"}),t&&(f?Object(y.jsx)(b.a,{address:t,size:"large"}):Object(y.jsx)(b.c,{items:x,onSelected:j,dropdownClass:Object(Je.a)(Object(Je.a)({},ic.a.secondary),d),children:Object(y.jsx)(b.a,{address:t,size:"large"})}))]})]})},hc=x.a.div(lc||(lc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  align-items: center;\n  justify-content: center;\n  background-color: #f6f9fc;\n"]))),Oc=function(){var e=Ve().account,t=Gr(),n=X().setPageLoading,a=Re(),i=a.loading,c=a.load;return Object(r.useEffect)((function(){c()}),[c]),Object(r.useEffect)((function(){n(i||Object(oe.isUndefined)(t))}),[i,t]),Object(y.jsx)(hc,{children:Object(y.jsxs)("div",{children:[e&&!t&&Object(y.jsx)(l.a,{to:"/register"}),e&&t&&Object(y.jsx)(l.a,{to:"/account"})]})})},mc=x.a.div(dc||(dc=Object(j.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: ",";\n  align-items: ",";\n"])),(function(e){return e.horizontal?"row":"column"}),(function(e){return e.horizontal?"center":"flex-start"}),(function(e){return e.horizontal?"center":"flex-start"})),vc=function(e){var t=e.versionType,n=e.horizontal,r=void 0!==n&&n,a=e.value,i=void 0===a?"":a,c=e.prefix,o=void 0===c?"":c,s=r?"gray":"black",u=o?"#4388dd":"gray";return Object(y.jsxs)(mc,{horizontal:r,children:[Object(y.jsx)(Mt,{color:s,size:r?13:15,fw:"500",children:t}),r?Object(y.jsx)(Mt,{ml:15,mr:15,color:u,fw:"500",size:15,children:"".concat(o).concat(i)}):Object(y.jsx)(Mt,{mt:5,color:u,fw:"500",size:13,children:"".concat(o).concat(i)})]})},gc=n(1301),yc=n(1289),wc=n(1292),kc=function(e){var t=e.container,n=e.height,a=void 0===n?650:n,i=Object(de.a)(Ce,{fetchPolicy:"network-only"}),c=Object(h.a)(i,2),o=c[0],s=c[1],u=s.loading,l=s.data,d=s.error;Object(r.useEffect)((function(){o({variables:{container:t}})}),[]);var p=Object(r.useMemo)((function(){return u||d?"":null===l||void 0===l?void 0:l.getLog.log}),[l,u]);return Object(y.jsxs)(Sc,{height:a,children:[Object(y.jsx)(Ec,{size:"small",type:"secondary",label:"Refresh",onClick:function(){return o({variables:{container:t}})}}),!!p&&Object(y.jsx)(wc.a,{hasLineNumbers:!0,height:a-100,data:p,isTextWrapped:!0,theme:"dark"}),u&&Object(y.jsx)(b.e,{})]})},Sc=x.a.div(pc||(pc=Object(j.a)(["\n  height: ","px;\n  padding: 30px;\n  margin-top: 10px;\n  background-color: var(--sq-gray900);\n  align-items: center;\n"])),(function(e){return e.height})),Ec=Object(x.a)(b.b)(bc||(bc=Object(j.a)(["\n  margin-bottom: 20px;\n  height: 30px;\n  width: 100px;\n  margin-right: 20px;\n"])));!function(e){e[e.ServiceLog=0]="ServiceLog"}(jc||(jc={}));var Cc,Ic,Tc,Pc,Nc,qc,Ac=function(){var e=Object(r.useState)(jc.ServiceLog),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Object(r.useCallback)((function(){return Object(y.jsx)(kc,{height:500,container:"coordinator_service"})}),[n]);return Object(y.jsxs)("div",{style:{marginTop:30},children:[Object(y.jsx)(yc.a,{value:n,onChange:function(e,t){a(t)},textColor:"primary",indicatorColor:"primary",children:Object(y.jsx)(gc.a,{value:jc.ServiceLog,label:"Service Log"})}),i()]})},Rc=x.a.div(Cc||(Cc=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  min-width: 1270px;\n  padding: 30px 50px;\n  overflow: auto;\n"]))),Mc=x.a.div(Ic||(Ic=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  min-width: 685px;\n  margin-bottom: 30px;\n"]))),Dc=x.a.div(Tc||(Tc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n"]))),zc=x.a.div(Pc||(Pc=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin-top: 25px;\n  height: 50px;\n  width: 500px;\n"]))),Lc=function(){var e=Ve().account,t=Yr().metadata,n=X().setPageLoading,a=function(){var e=Ve().account,t=Xe(),n=Object(r.useState)(),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Object(r.useCallback)(Object(se.a)(le.a.mark((function n(){var r,a,i,o,s;return le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.rewardsDistributor.getRewardInfo(e);case 4:return r=n.sent.lastClaimEra,n.next=7,Promise.all([t.eraManager.eraNumber(),t.rewardsStaking.getLastSettledEra(e)]);case 7:a=n.sent,i=Object(h.a)(a,2),o=i[0],s=i[1],c({currentEra:o.toString(),lastClaimedEra:r.toString(),lastSettledEra:s.toString()});case 12:case"end":return n.stop()}}),n)}))),[t,e]);return Object(r.useEffect)((function(){o()}),[o]),i}();Object(r.useEffect)((function(){n(Object(oe.isUndefined)(a))}),[a]);var i=Object(r.useMemo)((function(){return Object(y.jsxs)(zc,{children:[Object(y.jsx)(vc,{versionType:"CURRENT ERA",prefix:"#",value:null===a||void 0===a?void 0:a.currentEra}),Object(y.jsx)(Rt,{height:50}),Object(y.jsx)(vc,{versionType:"LAST CLAIM ERA",prefix:"#",value:null===a||void 0===a?void 0:a.lastClaimedEra}),Object(y.jsx)(Rt,{height:50}),Object(y.jsx)(vc,{versionType:"LAST SETTLE ERA",prefix:"#",value:null===a||void 0===a?void 0:a.lastSettledEra})]})}),[a]);return Object(y.jsxs)(Rc,{children:[Object(y.jsxs)(Mc,{children:[Object(y.jsx)(ur,{address:null!==e&&void 0!==e?e:"",size:100}),Object(y.jsxs)(Dc,{children:[Object(y.jsx)(Mt,{fw:"600",size:30,children:null===t||void 0===t?void 0:t.name}),Object(y.jsx)(Mt,{fw:"400",size:15,children:e}),i]})]}),Object(y.jsx)(Ac,{})]})},Vc=function(e){var t=e.visible,n=void 0!==t&&t,a=e.title,i=e.description,c=Object(r.useState)(n),o=Object(h.a)(c,2),s=o[0],u=o[1];return Object(y.jsx)(yn.a,{isOpen:s,style:Uc,closeTimeoutMS:200,ariaHideApp:!1,children:Object(y.jsxs)(Gc,{children:[Object(y.jsxs)(Fc,{children:[Object(y.jsx)(Mt,{fw:"bold",size:35,children:a}),Object(y.jsx)(Mt,{alignCenter:!0,fw:"400",mt:30,size:18,children:i})]}),Object(y.jsx)(Vt,{mt:100,width:300,title:"Confirm",onClick:function(){return u(!1)}})]})})},Uc={content:{backgroundColor:"white",borderRadius:15,top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:900,minWidth:700,padding:0},overlay:{zIndex:50,backgroundColor:"rgba(0, 0, 0, 0.65)"}},Gc=x.a.div(Nc||(Nc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 50px 30px;\n"]))),Fc=x.a.div(qc||(qc=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),$c=n(634),_c={lastProcessedHeight:0,lastProcessedTimestamp:0,targetHeight:0,chain:"",specName:"",genesisHash:"",indexerHealthy:void 0,indexerNodeVersion:"",queryNodeVersion:"",indexerStatus:"TERMINATED",queryStatus:"TERMINATED"},Yc={id:"",networkEndpoint:"",networkDictionary:"",nodeVersion:"",queryVersion:"",forceEnabled:!1,status:0,paygPrice:"",paygExpiration:86400,paygThreshold:1e3,paygOverflow:5},Hc=Object(Je.a)({name:"",owner:"",image:"",description:"",websiteUrl:"",codeUrl:"",version:"",currentDeployment:"",currentVersion:"",versionDescription:"",createdTimestamp:"",updatedTimestamp:"",metadata:void 0},Yc),Kc=function(e){var t=ot().notification,n=Object(r.useState)(),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Object(de.a)(Se,{fetchPolicy:"network-only"}),s=Object(h.a)(o,2),u=s[0],l=s[1].data,d=function(){return u({variables:{id:e}})};return Object(r.useEffect)((function(){l?c(l.project):d()}),[e,l,null===t||void 0===t?void 0:t.type]),{projectService:i,getProjectService:d}},Wc=bn(window.env.REGISTRY_PROJECT),Bc=bn(dn),Xc=function(){var e=Object(se.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bc.query({query:Ie,variables:{id:t},fetchPolicy:"network-only"});case 3:return n=e.sent,e.abrupt("return",n.data.queryMetadata);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",_c);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Qc=function(){var e=Object(se.a)(le.a.mark((function e(t){var n,r,a,i,c,o;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc.query({query:Pe,variables:{deploymentId:t}});case 2:if(r=e.sent,a=null===(n=r.data.deployments.nodes[0])||void 0===n?void 0:n.project){e.next=7;break}return console.error("Unable to get metadata for project"),e.abrupt("return",Hc);case 7:return e.next=9,Object(hr.c)(a.metadata);case 9:return i=e.sent,e.next=12,Xc(t);case 12:return c=e.sent,o=Object(Je.a)(Object(Je.a)(Object(Je.a)({},a),i),{},{metadata:c,id:t}),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jc=function(){var e=Object(se.a)(le.a.mark((function e(t){var n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wc.query({query:Te,variables:{indexer:t}});case 2:return n=e.sent,r=n.data.deploymentIndexers.nodes,e.abrupt("return",r.filter((function(e){return"TERMINATED"!==e.status})).map((function(e){return Object(Je.a)(Object(Je.a)({},Yc),{},{id:e.deploymentId})})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Zc(e,t){if(Object(oe.isEmpty)(e))return t;var n=t.filter((function(t){return!e.find((function(e){return e.id===t.id}))}));return[].concat(Object(mi.a)(e),Object(mi.a)(n))}var eo=function(){var e=Object(se.a)(le.a.mark((function e(t){var n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hr.c)(t,hr.a);case 2:return n=e.sent,r=$c.a.load(n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function to(e){switch(e){case"cosmos":return qr.cosmos;case"avalanche":return qr.avalanche;default:return qr.substrateNode}}var no={substrate:">=1.1.1",cosmos:">=0.1.0",avalanche:">=0.1.1"},ro=n(635),ao=n.n(ro);function io(e){return!Object(oe.isUndefined)(e)&&!e}function co(e){return oo.apply(this,arguments)}function oo(){return(oo=Object(se.a)(le.a.mark((function e(t){var n,r,a,i,c;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URL(t),r=n.host,a=n.protocol,i="".concat(a,"//").concat(r,"/healthy"),e.next=5,ao.a.get(i);case 5:return c=e.sent,e.abrupt("return",200===c.status);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var so,uo,lo,po,bo;function jo(e,t){return 0===e?0:t>=e?100:Math.round(100*t*100/e)/100}function fo(e){return"HEALTHY"===e||"STARTING"===e?"success":"error"}function xo(e){switch(e){case Ar.NOTINDEXING:return"error";case Ar.INDEXING:return"info";case Ar.READY:return"success";default:return"error"}}!function(e){e.healthy="HEALTHY",e.unhealthy="UNHEALTHY",e.terminated="TERMINATED"}(so||(so={}));var ho,Oo,mo,vo,go,yo,wo,ko,So,Eo,Co,Io,To,Po=function(e){var t,n,r=e.id,a=e.projectStatus,i=e.project;return Object(y.jsx)(No,{children:Object(y.jsxs)(qo,{children:[Object(y.jsx)(ur,{address:Object(hr.d)(r),size:100}),Object(y.jsxs)(Ao,{children:[Object(y.jsx)(Mt,{fw:"600",size:30,children:i.name}),Object(y.jsx)(Mt,{fw:"400",size:15,children:i.owner}),Object(y.jsxs)(Ro,{children:[Object(y.jsx)(vc,{versionType:"INDEXED NETWORK",value:null===(t=i.metadata)||void 0===t?void 0:t.chain}),Object(y.jsx)(Rt,{height:30}),Object(y.jsx)(vc,{versionType:"VERSION",value:"V".concat(null!==(n=i.version)&&void 0!==n?n:"1.0.0")}),Object(y.jsx)(Rt,{height:30}),Object(y.jsx)(vc,{versionType:"PROJECT STATUS",value:a})]})]})]})})},No=x.a.div(uo||(uo=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  min-height: 200px;\n  padding-right: 32px;\n"]))),qo=x.a.div(lo||(lo=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  align-items: center;\n  min-width: 685px;\n"]))),Ao=x.a.div(po||(po=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  margin-left: 40px;\n"]))),Ro=x.a.div(bo||(bo=Object(j.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 25px;\n  height: 50px;\n  width: 450px;\n"]))),Mo=x.a.div(ho||(ho=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  min-width: 1270px;\n  padding: 0px 50px;\n  padding-bottom: 50px;\n  overflow: auto;\n"]))),Do=x.a.div(Oo||(Oo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  -ms-overflow-style: none; /* for Internet Explorer, Edge */\n  scrollbar-width: none; /* for Firefox */\n  overflow-y: scroll;\n  ::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n  }\n"]))),zo=x.a.div(mo||(mo=Object(j.a)(["\n  display: flex;\n  background-color: white;\n  justify-content: space-between;\n  min-width: 1355px;\n  border-radius: 8px;\n  margin-top: 20px;\n  padding: 32px;\n"]))),Lo=x.a.div(vo||(vo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]))),Vo=x.a.div(go||(go=Object(j.a)(["\n  display: flex;\n  background-color: white;\n  border-radius: 8px;\n"]))),Uo=x.a.div(yo||(yo=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 200px;\n  margin-right: 30px;\n"]))),Go=x.a.div(wo||(wo=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),Fo=function(e){var t=e.title,n=e.subTitle,r=e.status;return Object(y.jsxs)(Uo,{children:[Object(y.jsxs)(Go,{children:[Object(y.jsx)(Mt,{mr:20,fw:"500",children:t}),!!r&&Object(y.jsx)(b.f,{text:r,state:fo(r)})]}),Object(y.jsx)(Mt,{size:15,color:"gray",mt:10,children:n})]})},$o=function(e){var t=e.id,n=e.actionItems,r=e.data;if(!r)return null;var a=function(e,t){return"onfinality/subql-".concat(e,":").concat(t)};return Object(y.jsxs)(zo,{children:[Object(y.jsxs)(Vo,{children:[Object(y.jsx)(Fo,{title:"Indexer Service",subTitle:"Image Version: ".concat(a("indexer",r.indexerNodeVersion)),status:r.indexerStatus}),Object(y.jsx)(Fo,{title:"Query Service",subTitle:"Image Version: ".concat(a("query",r.queryNodeVersion)),status:r.queryStatus}),Object(y.jsx)(Fo,{title:"Proxy Service",subTitle:"Url: ".concat(pn,"/query/").concat(t),status:r.queryStatus})]}),Object(y.jsx)(Lo,{children:n.map((function(e){var t=e.title,n=e.action;return Object(y.jsx)(Vt,{mt:10,width:265,title:t,onClick:n},t)}))})]})},_o=(ko={},Object(ee.a)(ko,Ar.NOTINDEXING,"rgba(214, 48, 48, 0.3)"),Object(ee.a)(ko,Ar.INDEXING,"rgba(67, 136, 221, 0.24)"),Object(ee.a)(ko,Ar.READY,"rgba(70, 219, 103, 0.4)"),ko),Yo=(So={},Object(ee.a)(So,Ar.NOTINDEXING,"NOT INDEXING"),Object(ee.a)(So,Ar.INDEXING,"INDEXING"),Object(ee.a)(So,Ar.READY,"READY"),So),Ho=x.a.div(Eo||(Eo=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  margin-right: 50px;\n"]))),Ko=x.a.div(Co||(Co=Object(j.a)(["\n  display: flex;\n  min-width: 230px;\n  margin: 15px 0px;\n"]))),Wo=x.a.div(Io||(Io=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 15px;\n"]))),Bo=function(e){var t=e.percent,n=e.actionItems,r=e.status,a=e.metadata;return Object(y.jsxs)(zo,{children:[Object(y.jsxs)(Ho,{children:[Object(y.jsxs)(Wo,{children:[Object(y.jsx)(Mt,{size:15,fw:"500",mr:10,children:"Indexing Status"}),Object(oe.isUndefined)(r)?Object(y.jsx)(b.e,{}):Object(y.jsx)(b.f,{text:Yo[r],state:xo(r)})]}),!(null===a||void 0===a||!a.targetHeight)&&Object(y.jsxs)(Ko,{children:[Object(y.jsx)(vc,{horizontal:!0,versionType:"Latest Block",prefix:"#",value:a.targetHeight}),Object(y.jsx)(vc,{horizontal:!0,versionType:"Indexing Block",prefix:"#",value:a.lastProcessedHeight})]}),Object(y.jsx)(b.d,{progress:t/100})]}),Object(y.jsx)(Lo,{children:n.map((function(e){var t=e.title,n=e.action;return Object(y.jsx)(Vt,{mt:10,width:265,title:t,onClick:n},t)}))})]})},Xo=n(477),Qo=n(418),Jo=n(185);!function(e){e[e.ONGOING=0]="ONGOING",e[e.CLOSED=1]="CLOSED"}(To||(To={}));var Zo;!function(e){e.FINALIZED="FINALIZED",e.OPEN="OPEN",e.TERMINATED="TERMINATED"}(Zo||(Zo={}));var es=Xo.NETWORK_CONFIGS.kepler,ts=new Xo.GraphqlQueryClient(es).explorerClient;function ns(e){return e===To.ONGOING?Qo.GetIndexerOngoingFlexPlans:Qo.GetIndexerClosedFlexPlans}function rs(e,t,n){return{dataIndex:e,title:Object(y.jsx)(f.e,{tooltip:n,title:t}),render:function(e){return Object(y.jsx)(f.d,{children:e})}}}var as,is,cs,os=[rs("price","PRICE"),rs("period","MAXIMUM VALIDITY PERIOD")];function ss(e){var t=e.price,n=e.period,r=e.onEdit,a={dataIndex:"action",title:Object(y.jsx)(f.e,{title:"ACTION"}),render:function(){return Object(y.jsx)(f.a,{type:"link",size:"medium",colorScheme:"standard",label:"Edit",onClick:r})}};return Object(y.jsx)(f.c,{tableProps:{pagination:!1,columns:[].concat(os,[a]),dataSource:[{price:"".concat(t," SQT / 1000 requests"),period:"".concat(n," days")}]}})}var us=x.a.div(as||(as=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 0px;\n"]))),ls=x.a.div(is||(is=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 550px;\n"]))),ds=x.a.div(cs||(cs=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-top: 20px;\n"]))),ps=Ta.payg.instruction;function bs(e){var t=e.onEnablePayg;return Object(y.jsxs)(ls,{children:[Object(y.jsx)(Mt,{size:32,fw:700,children:ps.title}),Object(y.jsx)(Mt,{mt:15,alignCenter:!0,size:16,color:"#454F58",children:ps.desc[0]}),Object(y.jsx)(Mt,{mt:15,alignCenter:!0,size:16,color:"#454F58",children:ps.desc[1]}),Object(y.jsxs)(Mt,{mt:15,alignCenter:!0,size:16,color:"#454F58",children:[ps.sub,Object(y.jsx)("a",{target:"_blank",href:ps.link,rel:"noreferrer",children:"here"})]}),Object(y.jsx)(Vt,{mt:25,type:"secondary",title:ps.button,onClick:t})]})}var js,fs,xs,hs=Ta.payg.channels,Os=[rs("consumer","CONSUMER"),rs("price","PRICE","The price of this flex plan"),rs("spent","SPENT","The total amount that the consumer has spent so far"),rs("deposit","REMAINING DEPOSIT"),rs("expiration","EXPIRATION","The Flex Plan will end on the expiry date"),(js="status",fs="STATUS",{dataIndex:js,title:Object(y.jsx)(f.e,{tooltip:xs,title:fs}),render:function(e){var t=e.state,n=e.text;return Object(y.jsx)(f.g,{state:t,children:n})}})];function ms(e){return e===To.ONGOING?{state:"success",text:"Active"}:{state:"info",text:"Completed"}}var vs,gs,ys,ws,ks,Ss=[{label:hs.tabs.open},{label:hs.tabs.closed}],Es=Ta.payg.channels;function Cs(e){var t=e.deploymentId,n=e.onTerminate,a=Object(r.useState)(To.ONGOING),i=Object(h.a)(a,2),c=i[0],o=i[1],s=function(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Object(r.useMemo)((function(){return null===a||void 0===a?void 0:a.data.stateChannels.nodes}),[a]),o=Ve().account,s=Object(r.useCallback)(function(){var e=Object(se.a)(le.a.mark((function e(t,n){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ts.query({query:ns(n),variables:{indexer:o,deploymentId:t,now:new Date}});case 4:r=e.sent,i(r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[o,e]);return Object(r.useEffect)((function(){o&&s(e,To.ONGOING)}),[o]),{getPlans:s,plans:c}}(t),u=s.plans,l=s.getPlans,d=Object(r.useMemo)((function(){return function(e,t,n){return t?t.map((function(t){return{consumer:t.consumer,price:"500 SQT",spent:"".concat(t.spent," SQT"),deposit:"".concat(t.total-t.spent," SQT"),expiration:new Date(t.expiredAt).toLocaleDateString(),status:ms(n),action:{status:t.status,id:e}}})):[]}(t,u,c)}),[u,c]),p={dataIndex:"action",title:Object(y.jsx)(f.e,{title:"ACTION"}),render:function(e){var t=e.id;return Object(y.jsx)(f.a,{type:"link",size:"medium",colorScheme:"standard",title:"Edit",onClick:function(){return n&&n(t)}})}};return Object(y.jsxs)(ds,{children:[Object(y.jsx)(Mt,{mb:10,size:20,children:Es.title}),Object(y.jsx)(f.f,{tabs:Ss,onTabClick:function(e){o(e),l(t,e)}}),Object(y.jsx)(f.c,{tableProps:{columns:[].concat(Object(mi.a)(Os),[p]),dataSource:d}})]})}function Is(e){var t=e.id,n=e.config,a=function(e){var t=Object(pe.a)(qe),n=Object(h.a)(t,2),a=n[0],i=n[1].loading,c=Kc(e),o=c.projectService,s=c.getProjectService,u=et().removeModal,l=Object(r.useMemo)((function(){var e;return o&&o.paygPrice?{paygPrice:Object(xr.b)(Jo.a.from(o.paygPrice).mul(1e3)),paygExpiration:(null!==(e=null===o||void 0===o?void 0:o.paygExpiration)&&void 0!==e?e:0)/86400}:{paygPrice:"",paygExpiration:0}}),[o]),d=Object(r.useCallback)(function(){var t=Object(se.a)(le.a.mark((function t(n,r){var i,c,o;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=n.paygPrice,c=n.paygPeriod,o=Object(xr.d)(i),t.next=5,a({variables:{paygPrice:o.div(1e3).toString(),paygExpiration:Number(86400*c),paygThreshold:10,paygOverflow:10,id:e}});case 5:s(),u(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),r.setErrors(Object(ee.a)({},ca.paygPrice,"Invalid PAYG: ".concat(t.t0)));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),[]);return{paygConfig:l,changePAYGCofnig:d,loading:i}}(t),i=a.paygConfig,c=a.changePAYGCofnig,o=a.loading,s=null!==i&&void 0!==i?i:n,u=s.paygPrice,l=s.paygExpiration,d=et().showModal,p=Object(r.useMemo)((function(){return u&&l}),[u,l]),b=function(e,t){return[{index:0,title:qa.open.title,desc:qa.open.desc,buttonTitle:"Confirm",form:Da(e,t)}]}(n,c),j=function(e){d({visible:!0,steps:b,title:e,loading:o})};return Object(y.jsxs)(us,{children:[!p&&Object(y.jsx)(bs,{onEnablePayg:function(){return j("Enable Flex Plan")}}),p&&Object(y.jsx)(ss,{price:u,period:l,onEdit:function(){return j("Update Flex Plan")}}),p&&Object(y.jsx)(Cs,{deploymentId:t})]})}var Ts,Ps=function(e){var t=e.title,n=e.desc,r=e.ml,a=e.mt;return Object(y.jsxs)(zs,{ml:r,mt:a,children:[Object(y.jsx)(Mt,{size:18,children:t}),Object(y.jsx)(Mt,{mt:15,size:16,color:"gray",children:n})]})},Ns=function(e){return new Date(e).toLocaleDateString()},qs=function(e){var t=e.project,n=t.description,r=t.websiteUrl,a=t.codeUrl,i=t.currentDeployment,c=t.createdTimestamp,o=t.updatedTimestamp;return Object(y.jsxs)(As,{children:[Object(y.jsxs)(Rs,{children:[Object(y.jsx)(Ps,{title:"Description",desc:n}),Object(y.jsxs)(Ms,{children:[Object(y.jsx)(Ps,{title:"Created",desc:Ns(c)}),Object(y.jsx)(Ps,{ml:150,title:"Last Updated",desc:Ns(o)})]})]}),Object(y.jsxs)(Ds,{children:[Object(y.jsx)(Ps,{title:"Deployment ID",desc:i}),Object(y.jsx)(Ps,{mt:30,title:"Website URL",desc:r}),Object(y.jsx)(Ps,{mt:30,title:"Source Code URL",desc:a})]})]})},As=x.a.div(vs||(vs=Object(j.a)(["\n  display: flex;\n  min-height: 350px;\n  margin-top: 20px;\n"]))),Rs=x.a.div(gs||(gs=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  min-width: 500px;\n  width: 45%;\n"]))),Ms=x.a.div(ys||(ys=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  margin-top: 50px;\n"]))),Ds=x.a.div(ws||(ws=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-left: 80px;\n"]))),zs=x.a.div(ks||(ks=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-left: ","px;\n  margin-top: ","px;\n"])),(function(e){var t=e.ml;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mt;return null!==t&&void 0!==t?t:0}));!function(e){e[e.ProjectDetails=0]="ProjectDetails",e[e.NodeLog=1]="NodeLog",e[e.PAYG=2]="PAYG"}(Ts||(Ts={}));var Ls,Vs,Us,Gs,Fs,$s,_s,Ys,Hs,Ks,Ws,Bs,Xs=[{label:"Project Details"},{label:"Service Log"},{label:"Flex Plan"}],Qs=function(e){var t=e.id,n=e.project,a=e.config,i=Object(r.useState)(Ts.ProjectDetails),c=Object(h.a)(i,2),o=c[0],s=c[1],u=Object(r.useCallback)((function(){switch(o){case Ts.NodeLog:return Object(y.jsx)(kc,{container:"node_".concat((e=t,e.substring(0,15).toLowerCase())),height:650});case Ts.ProjectDetails:return Object(y.jsx)(qs,{id:t,project:n});case Ts.PAYG:return Object(y.jsx)(Is,{id:t,config:a});default:return Object(y.jsx)("div",{})}var e}),[o]);return Object(y.jsxs)("div",{style:{marginTop:30},children:[Object(y.jsx)(f.f,{tabs:Xs,onTabClick:function(e){s(e)}}),u()]})},Js=function(){var e=Object(l.i)().id,t=Object(l.h)().state.data,n=function(e){var t,n=Object(r.useState)(),a=Object(h.a)(n,2),i=a[0],c=a[1],o=Ve().account,s=ot(),u=Xe();return Object(r.useEffect)((function(){u&&o&&e&&u.queryRegistry.deploymentStatusByIndexer(Object(hr.d)(e),o).then((function(e){var t=e.status;c(t)})).catch((function(e){return console.error(e)}))}),[u,o,e,null===(t=s.notification)||void 0===t?void 0:t.type]),i}(e),a=function(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=ot().notification,o=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Qc(e);case 3:n=t.sent,i(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),i(void 0),console.error("Unable to get project details",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]);return Object(r.useEffect)((function(){o()}),[o,null===c||void 0===c?void 0:c.type]),a}(e),i=X().setPageLoading,c=Object(l.g)();!function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Gr(),n=Fr().controller,a=Object(l.g)(),i=X(),c=i.pageLoading,o=i.setPageLoading;Object(r.useEffect)((function(){o(Object(oe.isUndefined)(t)||Object(oe.isUndefined)(n)),!c&&e&&(io(t)?a.replace("/"):io(n)&&a.replace("/account"))}),[t,n])}(!t);var o=Ka(e),s=Kc(e),u=s.projectService,d=s.getProjectService,p=ot().dispatchNotification,b=Object(pe.a)(xe),j=Object(h.a)(b,2),f=j[0],x=j[1].loading,O=Object(pe.a)(he),m=Object(h.a)(O,2),v=m[0],g=m[1].loading,w=Object(pe.a)(ke),k=Object(h.a)(w,2),S=k[0],E=k[1].loading,C=function(e){var t=Object(de.a)(Ne),n=Object(h.a)(t,2),a=n[0],i=n[1].data,c=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n,r,i,c,o;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eo(e);case 2:c=t.sent,o=null!==(n=null===(r=c.runner)||void 0===r||null===(i=r.query)||void 0===i?void 0:i.version)&&void 0!==n?n:">=0.15.0",a({variables:{range:o,registry:qr.query}});case 5:case"end":return t.stop()}}),t)}))),[e]);Object(r.useEffect)((function(){c()}),[c]);var o=null===i||void 0===i?void 0:i.getRegistryVersions;return Object(oe.isEmpty)(o)?[]:o}(e),I=function(e){var t=Object(de.a)(Ne),n=Object(h.a)(t,2),a=n[0],i=n[1].data,c=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n,r,i,c,o,s,u,l,d;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eo(e);case 2:i=t.sent,c=i.dataSources,o=i.runner,s=c[0].kind,u=s.split("/")[0],l=to(u),d=null!==(n=null===o||void 0===o||null===(r=o.node)||void 0===r?void 0:r.version)&&void 0!==n?n:no[u],a({variables:{range:d,registry:l}});case 9:case"end":return t.stop()}}),t)}))),[e]);Object(r.useEffect)((function(){c()}),[c]);var o=null===i||void 0===i?void 0:i.getRegistryVersions,s=null===o||void 0===o?void 0:o.filter((function(e){return"v1.2.1"!==e}));return Object(oe.isEmpty)(s)?[]:s}(e),T=Object(r.useState)(0),P=Object(h.a)(T,2),N=P[0],q=P[1],A=Object(r.useState)(),R=Object(h.a)(A,2),M=R[0],D=R[1],z=Object(r.useState)(!1),L=Object(h.a)(z,2),V=L[0],U=L[1],G=Object(r.useState)(),F=Object(h.a)(G,2),$=F[0],_=F[1],Y=function(){var t=Object(se.a)(le.a.mark((function t(){var n;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xc(e);case 2:n=t.sent,D(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){i(Object(oe.isUndefined)(a))}),[a]),Object(r.useEffect)((function(){M&&q(jo(M.targetHeight,M.lastProcessedHeight))}),[M]),Object(r.useEffect)((function(){Y()}),[n]);var H,K,W,B,Q,J,Z=Object(r.useMemo)((function(){return x||g||E}),[x,g,E]),te=Object(r.useMemo)((function(){var e="HEALTHY"===(null===M||void 0===M?void 0:M.indexerStatus);switch(n){case Ar.NOTINDEXING:return e?Rr.Started:Rr.NotIndexing;case Ar.INDEXING:return e?Rr.Indexing:Rr.Terminated;case Ar.READY:return e?Rr.Ready:Rr.Terminated;default:return Rr.NotIndexing}}),[n,M]),ne=Object(r.useMemo)((function(){return te===Rr.Terminated?Object(Je.a)({visible:!0},za[te]):{visible:!1}}),[te]),re=function(e){var t;return t={},Object(ee.a)(t,Rr.NotIndexing,[]),Object(ee.a)(t,Rr.Started,[Aa("Announce Indexing",(function(){return e(Lr.AnnounceIndexing)}))]),Object(ee.a)(t,Rr.Indexing,[Aa("Announce Ready",(function(){return e(Lr.AnnounceReady)}))]),Object(ee.a)(t,Rr.Ready,[Aa("Announce NotIndexing",(function(){return e(Lr.AnnounceNotIndexing)}))]),Object(ee.a)(t,Rr.Terminated,[Aa("Announce NotIndexing",(function(){return e(Lr.AnnounceNotIndexing)}))]),t}((function(e){_(e),U(!0)})),ae=function(e){var t;return t={},Object(ee.a)(t,Rr.NotIndexing,[Aa("Start Indexing",(function(){return e(Lr.StartIndexing)})),Aa("Remove Project",(function(){return e(Lr.RemoveProject)}))]),Object(ee.a)(t,Rr.Started,[Aa("Stop Project",(function(){return e(Lr.StopProject)}))]),Object(ee.a)(t,Rr.Indexing,[Aa("Restart Indexing",(function(){return e(Lr.RestartProject)})),Aa("Stop Indexing",(function(){return e(Lr.StopIndexing)}))]),Object(ee.a)(t,Rr.Ready,[Aa("Restart Indexing",(function(){return e(Lr.RestartProject)})),Aa("Stop Indexing",(function(){return e(Lr.StopIndexing)}))]),Object(ee.a)(t,Rr.Terminated,[Aa("Restart Indexing",(function(){return e(Lr.RestartProject)})),Aa("Remove Project",(function(){return e(Lr.RemoveProject)}))]),t}((function(e){_(e),U(!0)})),ie=Object(r.useMemo)((function(){return Object(oe.isUndefined)(te)?[]:re[te]}),[te]),ce=Object(r.useMemo)((function(){return Object(oe.isUndefined)(te)?[]:ae[te]}),[te]),ue=function(e){var t;U(!1),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.message&&p(Fa(e.data.message))},be=Object(r.useMemo)((function(){var e,t;return{networkEndpoint:null!==(e=null===u||void 0===u?void 0:u.networkEndpoint)&&void 0!==e?e:"",networkDictionary:null!==(t=null===u||void 0===u?void 0:u.networkDictionary)&&void 0!==t?t:"",nodeVersion:null!==u&&void 0!==u&&u.nodeVersion?u.nodeVersion:I[0],queryVersion:null!==u&&void 0!==u&&u.queryVersion?u.queryVersion:C[0],forceEnabled:!(null===u||void 0===u||!u.networkEndpoint)&&(null===u||void 0===u?void 0:u.forceEnabled),paygPrice:Object(xr.b)(null!==u&&void 0!==u&&u.paygPrice?null===u||void 0===u?void 0:u.paygPrice:0),paygExpiration:(null!==u&&void 0!==u&&u.paygExpiration?null===u||void 0===u?void 0:u.paygExpiration:0)/86400,paygThreshold:null!==u&&void 0!==u&&u.paygThreshold?null===u||void 0===u?void 0:u.paygThreshold:1e3,paygOverflow:null!==u&&void 0!==u&&u.paygOverflow?null===u||void 0===u?void 0:u.paygOverflow:5}}),[u,I,C]),je=Object(r.useMemo)((function(){return{query:C,node:I}}),[I,C]),fe=function(e){p(La[e]),function(){var e=setInterval((function(){return Y()}),6e3);setTimeout((function(){clearInterval(e),d()}),6e4)}()},Oe=function(){var t=Object(se.a)(le.a.mark((function t(n,r){var a;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=n.forceEnabled,t.next=4,f({variables:Object(Je.a)(Object(Je.a)({},n),{},{forceEnabled:(i=a,!0===i||"true"===i),id:e})});case 4:ue(),fe(ha.Started),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r.setErrors(Object(ee.a)({},ca.networkEndpoint,"Invalid service endpoint"));case 11:case"end":return t.stop()}var i}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),me=function(){var t=Object(se.a)(le.a.mark((function t(){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v({variables:{id:e}});case 3:ue(),fe(ha.Terminated),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("fail to stop project",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),ve=function(){var t=Object(se.a)(le.a.mark((function t(){return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S({variables:{id:e}});case 3:c.replace("/projects"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("fail to remove project",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),ge=(H=be,K=je,W=Oe,Object(ee.a)({},Lr.StartIndexing,[{index:0,title:Pa.start.title,desc:Pa.start.desc,buttonTitle:"Confirm",form:Ma(H,K,W),onClick:W}])),ye=function(e,t,n){return Object(ee.a)({},Lr.RestartProject,[{index:0,title:Pa.restart.title,desc:Pa.restart.desc,buttonTitle:"Confirm",form:Ma(e,t,n)}])}(be,je,Oe),we=(B=me,Object(ee.a)({},Lr.StopIndexing,[{index:0,title:Pa.stop.title,desc:Pa.stop.desc,buttonTitle:"Confirm",onClick:B}])),Se=function(e){return Object(ee.a)({},Lr.StopProject,[{index:0,title:Pa.stop.title,desc:Pa.stop.desc,buttonTitle:"Confirm",onClick:e}])}(me),Ee=(Q=ve,Object(ee.a)({},Lr.RemoveProject,[{index:0,title:Pa.remove.title,desc:Pa.remove.desc,buttonTitle:"Confirm",onClick:Q}])),Ce=(J=function(){return o(Lr.AnnounceIndexing,ue)},Object(ee.a)({},Lr.AnnounceIndexing,[{index:0,title:Na.indexing.title,desc:Na.indexing.desc,buttonTitle:"Send Transction",onClick:J}])),Ie=function(e){return Object(ee.a)({},Lr.AnnounceReady,[{index:0,title:Na.ready.title,desc:Na.ready.desc,buttonTitle:"Send Transction",onClick:e}])}((function(){return o(Lr.AnnounceReady,ue)})),Te=function(e){return Object(ee.a)({},Lr.AnnounceNotIndexing,[{index:0,title:Na.notIndexing.title,desc:Na.notIndexing.desc,buttonTitle:"Send Transction",onClick:e}])}((function(){return o(Lr.AnnounceNotIndexing,ue)})),Pe=Object(Je.a)(Object(Je.a)(Object(Je.a)(Object(Je.a)(Object(Je.a)(Object(Je.a)(Object(Je.a)(Object(Je.a)({},ge),ye),we),Se),Ee),Ce),Ie),Te),qe=Object(r.useMemo)((function(){return $?[Ra[$],Pe[$]]:["",[]]}),[$,Pe]),Ae=Object(h.a)(qe,2),Re=Ae[0],Me=Ae[1];return Object(y.jsxs)(Mo,{children:[a&&Object(y.jsxs)(Do,{children:[Object(y.jsx)(Po,{id:e,projectStatus:te,project:a}),Object(y.jsx)(Bo,{percent:N,actionItems:ie,status:n,metadata:M}),Object(y.jsx)($o,{id:e,actionItems:ce,data:M}),Object(y.jsx)(Qs,{id:e,project:a,config:be})]}),Object(y.jsx)(Zn,{visible:V,title:Re,onClose:ue,steps:Me,type:$,loading:Z}),Object(y.jsx)(Vc,Object(Je.a)({},ne))]})},Zs=x.a.div(Ls||(Ls=Object(j.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: center;\n"]))),eu=x.a.div(Vs||(Vs=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  min-width: 600px;\n  padding: 10px 100px;\n  padding-bottom: 150px;\n  overflow-y: scroll;\n"]))),tu=x.a.div(Us||(Us=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  align-items: center;\n  justify-content: space-between;\n"]))),nu=x.a.div(Gs||(Gs=Object(j.a)(["\n  display: flex;\n  flex: ",";\n  background-color: ",";\n  padding-left: ","px;\n  min-width: ","px;\n  margin-right: 15px;\n  align-items: center;\n"])),(function(e){var t=e.flex;return null!==t&&void 0!==t?t:1}),(function(e){var t=e.color;return null!==t&&void 0!==t?t:"white"}),(function(e){var t=e.pl;return null!==t&&void 0!==t?t:0}),(function(e){var t=e.mw;return null!==t&&void 0!==t?t:100})),ru=x.a.div(Fs||(Fs=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  min-height: 90px;\n  margin: 10px 0px;\n  padding: 10px 10px;\n  background-color: white;\n  :hover {\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    cursor: pointer;\n  }\n"]))),au=Object(x.a)(b.d)($s||($s=Object(j.a)(["\n  max-width: 60%;\n  min-width: 300;\n"]))),iu=x.a.div(_s||(_s=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  margin-left: 20px;\n"]))),cu=x.a.div(Ys||(Ys=Object(j.a)(["\n  display: flex;\n  width: 100%;\n  min-width: 600px;\n  height: 60px;\n  margin-top: 50px;\n  margin-bottom: 30px;\n"]))),ou=[{title:"Project Name",flex:7},{title:"Progress",flex:6},{title:"Status",flex:1}],su=function(){return Object(y.jsx)(cu,{children:ou.map((function(e){var t=e.title,n=e.flex;return Object(y.jsx)(nu,{color:"#f6f9fc",flex:n,children:Object(y.jsx)(Mt,{color:"gray",children:t})},t)}))})},uu=x.a.div(Hs||(Hs=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: ",";\n  border-radius: 5px;\n  padding: 5px 10px;\n  min-width: 80px;\n"])),(function(e){var t;return null!==(t=e.color)&&void 0!==t?t:"lightgreen"})),lu=x.a.div(Ks||(Ks=Object(j.a)(["\n  font-size: 13px;\n  color: black;\n"]))),du=function(e){var t=e.text,n=e.color;return Object(y.jsx)(uu,{color:n,children:Object(y.jsx)(lu,{color:n,children:t})})},pu=function(e){var t=e.id,n=e.name,a=e.metadata,i=Object(l.g)(),c=function(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=Ve().account,o=Xe(),s=Object(r.useCallback)(Object(se.a)(le.a.mark((function t(){var n,r;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o&&c&&e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o.queryRegistry.deploymentStatusByIndexer(Object(hr.d)(e),c);case 4:n=t.sent,r=n.status,i(r);case 7:case"end":return t.stop()}}),t)}))),[o,c,e]);return Object(r.useEffect)((function(){s()}),[s]),a}(t),o=Object(r.useMemo)((function(){return a?jo(a.targetHeight,a.lastProcessedHeight):0}),[a]);return Object(y.jsxs)(ru,{onClick:function(){return i.push("/project/".concat(t),{data:Object(Je.a)(Object(Je.a)({},e),{},{status:c})})},children:[Object(y.jsxs)(nu,{pl:15,flex:7,children:[Object(y.jsx)(ur,{address:Object(hr.d)(t),size:70}),Object(y.jsxs)(iu,{children:[Object(y.jsx)(Mt,{fw:"600",size:18,children:n}),Object(y.jsx)(Mt,{size:13,mt:5,children:t})]})]}),Object(y.jsx)(nu,{flex:6,children:Object(y.jsx)(au,{progress:o/100})}),Object(y.jsx)(nu,{flex:1,children:Object(oe.isUndefined)(c)?Object(y.jsx)(f.b,{}):Object(y.jsx)(du,{text:Yo[c],color:_o[c]})})]})},bu=x.a.div(Ws||(Ws=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  margin-top: 80px;\n"]))),ju=function(e){var t=e.onClick;return Object(y.jsx)(bu,{children:Object(y.jsx)(yi,{item:{title:"Start to index a Subquery project",desc:"Go to Subquery Explorer to start exploring query projects, pick the project you are interesting and copy the deployment id in the page, then press the add project button and paste in deployment id, add the project into you coordinator service, and you can manage the projects in indexer app. ",buttonTitle:"Add Project"},onClick:t,link:Object(y.jsx)("a",{target:"_blank",href:"https://frontier.subquery.network/explorer",rel:"noreferrer",children:"SubQuery Explorer"})})})},fu=function(){var e=Gr(),t=X().setPageLoading,n=Object(pe.a)(we),a=Object(h.a)(n,2),i=a[0],c=a[1].loading,o=Object(de.a)(Ee,{fetchPolicy:"network-only"}),s=Object(h.a)(o,2),u=s[0],l=function(e){var t=Object(r.useState)(),n=Object(h.a)(t,2),a=n[0],i=n[1],c=null===e||void 0===e?void 0:e.getProjects,o=X().setPageLoading,s=Ve().account,u=Object(r.useCallback)(Object(se.a)(le.a.mark((function e(){var t,n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Jc(s);case 4:if(t=e.sent,n=Zc(c,t),!Object(oe.isUndefined)(n)){e.next=8;break}return e.abrupt("return");case 8:if(!Object(oe.isEmpty)(n)){e.next=12;break}return o(!1),i([]),e.abrupt("return");case 12:return e.prev=12,e.next=15,Promise.all(n.map((function(e){var t=e.id;return Promise.all([Qc(t),Xc(t)])})));case 15:r=e.sent,i(r.map((function(e){var t=Object(h.a)(e,2),n=t[0],r=t[1];return Object(Je.a)(Object(Je.a)({},n),{},{metadata:r})})).filter((function(e){return!!e.id}))),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Get project details failed:",e.t0),o(!1);case 23:case"end":return e.stop()}}),e,null,[[12,19]])}))),[c,s]);return Object(r.useEffect)((function(){o(!0),u()}),[u,e]),{projectDetailList:a,getProjectDetailList:u}}(s[1].data),d=l.projectDetailList,p=Object(r.useState)(!1),b=Object(h.a)(p,2),j=b[0],f=b[1];Object(r.useEffect)((function(){t(Object(oe.isUndefined)(d))}),[d]),Object(r.useEffect)((function(){t(!0),u()}),[]);var x,O=(x=function(){var e=Object(se.a)(le.a.mark((function e(t,n){var r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t[ca.deploymentId].trim(),e.next=4,i({variables:{id:r}});case 4:f(!1),u(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.setErrors(Object(ee.a)({},ca.deploymentId,"Invalid deployment id"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),Object(ee.a)({},zr.addProject,[{index:0,title:"Add new project",desc:"Input the deployment id, and add the project into you service. Your can manage the project in the projects page and start indexing the project at any time you want.",buttonTitle:"Add project",form:{formValues:la,schema:ua,onFormSubmit:x,items:[{formKey:ca.deploymentId,title:"Add new project",placeholder:"QmYDpk94SCgxv4j2PyLkaD8fWJpHwJufMLX2HGjefsNHH4"}]}}]));return Object(y.jsxs)(Zs,{children:[e&&(Object(oe.isUndefined)(d)?null:Object(oe.isEmpty)(d)?Object(y.jsx)(ju,{onClick:function(){return f(!0)}}):Object(y.jsxs)(eu,{children:[Object(y.jsxs)(tu,{children:[Object(y.jsx)(Mt,{size:45,children:"Projects"}),Object(y.jsx)(Vt,{title:"Add Project",onClick:function(){return f(!0)}})]}),Object(y.jsx)(su,{}),d.map((function(e){return Object(y.jsx)(pu,Object(Je.a)({},e),e.id)}))]})),Object(y.jsx)(Zn,{visible:j,title:O.addProject[0].title,onClose:function(){f(!1)},steps:O.addProject,currentStep:0,type:zr.addProject,loading:c})]})},xu=function(){var e=function(){var e=Object(r.useState)(),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Ve().account,c=Xe(),o=Object(r.useCallback)(Object(se.a)(le.a.mark((function e(){var t,n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,c.indexerRegistry.minimumStakingAmount();case 5:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==t;case 9:if(!e.t0){e.next=13;break}e.t2=t,e.next=14;break;case 13:e.t2=1e3;case 14:return n=e.t2,e.next=17,c.sqToken.allowance(i,c.staking.address);case 17:r=e.sent,a(!!r.gte(n)),e.next=24;break;case 21:e.prev=21,e.t3=e.catch(2),a(!1);case 24:case"end":return e.stop()}}),e,null,[[2,21]])}))),[c,i]);return Object(r.useEffect)((function(){o()}),[o]),n}();return Object(r.useMemo)((function(){if(!Object(oe.isUndefined)(e))return e?mn.register:mn.onboarding}),[e])},hu=(Bs={},Object(ee.a)(Bs,mn.onboarding,{title:"Stake to become a Subquery Indexer",desc:"Become an Indexer so you can index subquery projects. You need to stake a minimum of 1000 SQT in order to index subquery projects. Learn more about the indexer",buttonTitle:"Get Started"}),Object(ee.a)(Bs,mn.authorisation,{title:"Request approve authorisation",desc:"Indexer Admin app need you to approve the authorisation request to deposit the SQT token into Subquery Staking contract, this is a one-time operation for the specific account. Please press the approve button then confirm and send the transaction on MetaMask.",buttonTitle:"Approve"}),Object(ee.a)(Bs,mn.register,{title:"Stake to become a Subquery Indexer",desc:"",buttonTitle:"Register Indexer"}),Object(ee.a)(Bs,mn.sync,{title:"Sync the indexer with coordinator service",desc:"This account has been an indexer already, please press the sync button to sync this account with your coordinator service, otherwise you can switch your account in the wallet to select the correct account.",buttonTitle:"Sync"}),Bs),Ou=function(e){var t=e.onSubmit,n=e.loading,r=hu[mn.register],a=r.title,i=r.buttonTitle;return Object(y.jsxs)(Sn,{children:[Object(y.jsx)(Mt,{mb:50,size:35,fw:"bold",children:a}),Object(y.jsx)(qt.c,{initialValues:na,validationSchema:ta,onSubmit:t,children:function(e){var t=e.errors,r=e.submitForm;return Object(y.jsxs)(Gt,{children:[Object(y.jsx)(Bn,{title:"Indexer Name",fieldKey:Jr.name,errors:t}),Object(y.jsx)(Bn,{title:"Proxy Endpoint",fieldKey:Jr.proxyEndpoint,errors:t}),Object(y.jsx)(Bn,{title:"Staking Amount",fieldKey:Jr.amount,errors:t}),Object(y.jsx)(Bn,{title:"Commission Rate (%)",fieldKey:Jr.rate,errors:t}),Object(y.jsx)(Ut,{children:Object(y.jsx)(Vt,{mt:20,width:300,type:"primary",title:i,loading:n,onClick:r})})]})}})]})},mu=function(){var e,t=Ue(),n=Ve().account,a=Ur(),i=Gr(),c=Xe(),o=$r(n),s=o.tokenBalance,u=o.getTokenBalance,d=Object(l.g)(),p=xu(),b=Re().updateIndexer,j=X().setPageLoading,f=ot().dispatchNotification,x=Object(r.useState)(),O=Object(h.a)(x,2),m=O[0],v=O[1],g=Object(r.useState)(!1),w=Object(h.a)(g,2),k=w[0],S=w[1],E=Object(r.useCallback)((function(){return m===mn.register}),[m]);Object(r.useEffect)((function(){j(Object(oe.isUndefined)(p)||Object(oe.isUndefined)(a)),p&&v(p),a&&v(mn.sync)}),[p,a]),Object(r.useEffect)((function(){n?i&&d.replace("/account"):d.replace("/")}),[i,n]);var C=Object(r.useMemo)((function(){return m&&hu[m]}),[m]),I=function(){S(!1),v(Fn[$n(m)+1])},T=function(e){console.error("Send transaction failed:",e),S(!1)},P=Object(r.useCallback)(Object(se.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),n){e.next=3;break}return e.abrupt("return",f({type:"danger",title:"Fail to sync the indexer",message:"Can not find account, make sure MetaMask is connected"}));case 3:return e.next=5,b(n);case 5:return S(!1),e.abrupt("return",d.replace("/account"));case 7:case"end":return e.stop()}}),e)}))),[i]),N=function(){var e=Object(se.a)(le.a.mark((function e(){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,yr(c,t,"100000000000");case 4:return n=e.sent,e.next=7,n.wait(1);case 7:if(e.sent.status){e.next=10;break}throw new Error("Send approve transaction failed");case 10:I(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),T(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(se.a)(le.a.mark((function e(n,r){var a,i,o,l,d,p;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!0),e.next=4,u();case 4:if(a=n.name,i=n.proxyEndpoint,o=n.amount,l=n.rate,!(Number(s)<o)){e.next=9;break}return S(!1),r.setErrors(Object(ee.a)({},Jr.amount,"Account balance ".concat(s," is not enough for staking ").concat(o," SQT"))),e.abrupt("return");case 9:return e.next=11,co(i);case 11:if(e.sent){e.next=16;break}return S(!1),r.setErrors(Object(ee.a)({},Jr.proxyEndpoint,"Invalid proxy endpoint")),e.abrupt("return");case 16:return e.next=18,Object(hr.e)(a,i);case 18:return d=e.sent,e.next=21,kr(c,t,o.toString(),d,1e4*l);case 21:return p=e.sent,e.next=24,p.wait(1);case 24:if(e.sent.status){e.next=27;break}throw new Error("Send indexer registry transaction failed");case 27:I(),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),T(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n){return e.apply(this,arguments)}}(),A=(e={},Object(ee.a)(e,mn.onboarding,(function(){return v(mn.authorisation)})),Object(ee.a)(e,mn.authorisation,N),Object(ee.a)(e,mn.register,q),Object(ee.a)(e,mn.sync,P),e);return Object(y.jsxs)(hc,{children:[function(){if(m===mn.onboarding)return null;var e=$n(m);return Object(y.jsx)(En,{current:e,children:Fn.map((function(t,n){return Object(y.jsx)(En.Step,{status:_n(e,n),title:t},t)}))})}(),m&&C&&!E()&&Object(y.jsx)(yi,{item:C,loading:k,onClick:A[m]}),m&&E()&&Object(y.jsx)(Ou,{loading:k,onSubmit:q})]})},vu=(n(1230),n(1231),n(1232),function(){var e=function(){var e=Ve().account,t=X(),n=t.pageLoading,a=t.setPageLoading,i=Re(),c=i.indexer,o=i.load,s=De(),u=Ge(),l=Object(r.useMemo)((function(){return!!e&&(null===e||void 0===e?void 0:e.toLowerCase())===(null===c||void 0===c?void 0:c.toLowerCase())}),[e,c]),d=Object(r.useState)(),p=Object(h.a)(d,2),b=p[0],j=p[1];return Object(r.useEffect)((function(){o()}),[o]),Object(r.useEffect)((function(){var e=s&&u;e||a(!1);var t=!n&&!l&&!Object(oe.isEmpty)(c)||!e;j(t)}),[e,c,l,n]),b}();return Object(y.jsxs)(u.a,{children:[Object(y.jsx)(xc,{}),Object(y.jsxs)("div",{className:"Main",children:[e?Object(y.jsx)(on,{}):Object(y.jsxs)(l.d,{children:[Object(y.jsx)(l.b,{component:fu,path:"/projects"}),Object(y.jsx)(l.b,{exact:!0,component:Js,path:"/project/:id"}),Object(y.jsx)(l.b,{component:Oi,path:"/account"}),Object(y.jsx)(l.b,{component:_i,path:"/controller-management"}),Object(y.jsx)(l.b,{component:Lc,path:"/network"}),Object(y.jsx)(l.b,{component:mu,path:"/register"}),Object(y.jsx)(l.b,{component:Oc,path:"/"})]}),Object(y.jsx)(it,{}),Object(y.jsx)(Z,{}),Object(y.jsx)(Qn,{})]}),Object(y.jsx)(rc,{})]})}),gu=function(e){var t=e.error,n=e.componentStack,r=e.resetError;return Object(y.jsxs)("div",{className:"errorFallback",children:[Object(y.jsx)(b.g,{className:"errorText",children:"Something went wrong:"}),Object(y.jsx)(b.g,{className:"errorText",children:(null===t||void 0===t?void 0:t.message)||t.toString()}),Object(y.jsx)(b.g,{children:n}),Object(y.jsx)(b.b,{onClick:r,colorScheme:"gradient",label:"Try again."})]})},yu=function(){return Object(y.jsx)(p.a,{fallback:gu,showDialog:!0,children:Object(y.jsx)(d.a,{client:bn(dn),children:Object(y.jsx)(Ct,{children:Object(y.jsx)(Qe,{children:Object(y.jsx)(Me,{children:Object(y.jsx)(Q,{children:Object(y.jsx)(tt,{children:Object(y.jsx)(st,{children:Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(vu,{})})})})})})})})})})},wu=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1302)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(1233);o.a({dsn:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IPFS_GATEWAY:"https://unauthipfs.subquery.network/ipfs/api/v0",REACT_APP_QUERY_REGISTRY_PROJECT:"https://api.subquery.network/sq/subquery/kepler-subquery-project-mumbai"}).SENTRY_DSN,integrations:[new s.a],tracesSampleRate:1}),c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(yu,{})}),document.getElementById("root")),wu()},776:function(e,t){},841:function(e,t,n){var r={"./kepler.json":378,"./mainnet.json":379,"./revertcode.json":842,"./testnet.json":380};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=841},845:function(e,t){},850:function(e,t){},855:function(e,t){},874:function(e,t){},876:function(e,t){},887:function(e,t){},889:function(e,t){},902:function(e,t){},904:function(e,t){},976:function(e,t){}},[[1234,1,2]]]);
//# sourceMappingURL=main.1fc6cf19.chunk.js.map